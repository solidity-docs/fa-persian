<!DOCTYPE html>
<html class="writer-html5" lang="fa" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Yul &mdash; مستندات Solidity0.8.4</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/a4_railroad_diagram.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/toggle.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="_static/js/toggle.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="فهرست" href="genindex.html" />
    <link rel="search" title="جستجو" href="search.html" />
    <link rel="next" title="Style Guide" href="style-guide.html" />
    <link rel="prev" title="Import Path Resolution" href="path-resolution.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #65afff" >
            <a href="index.html">
            <img src="_static/logo.svg" class="logo" alt="آرم"/>
          </a>
              <div class="version">
                0.8.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="جستجوی مستندات" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">مبانی</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-smart-contracts.html">مقدمه‌ای بر قراد‌های هوشمند</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing-solidity.html">نصب کامپایلر سالیدیتی</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidity-by-example.html">سالیدیتی با مثال</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">توضیحات زبان</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="layout-of-source-files.html">چیدمان یک فایل منبع سالیدیتی</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure-of-a-contract.html">ساختار قرارداد</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">انواع</a></li>
<li class="toctree-l1"><a class="reference internal" href="units-and-global-variables.html">Units and Globally Available Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="control-structures.html">Expressions and Control Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="contracts.html">Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="assembly.html">Inline Assembly</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="grammar.html">Language Grammar</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">کامپایلر</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="using-the-compiler.html">Using the Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysing-compilation-output.html">Analysing the Compiler Output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Internals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_storage.html">Layout of State Variables in Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_memory.html">Layout in Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_calldata.html">Layout of Call Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/variable_cleanup.html">Cleaning Up Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/source_mappings.html">Source Mappings</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/optimizer.html">The Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Contract Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="abi-spec.html">Contract ABI Specification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Material</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="050-breaking-changes.html">Solidity v0.5.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="060-breaking-changes.html">Solidity v0.6.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="070-breaking-changes.html">Solidity v0.7.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="080-breaking-changes.html">Solidity v0.8.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="natspec-format.html">NatSpec Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="security-considerations.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="smtchecker.html">SMTChecker and Formal Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="path-resolution.html">Import Path Resolution</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Yul</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#motivation-and-high-level-description">Motivation and High-level Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-example">Simple Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stand-alone-usage">Stand-Alone Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#informal-description-of-yul">Informal Description of Yul</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#syntax">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#literals">Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-calls">Function Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variable-declarations">Variable Declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assignments">Assignments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#if">If</a></li>
<li class="toctree-l3"><a class="reference internal" href="#switch">Switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loops">Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-declarations">Function Declarations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#specification-of-yul">Specification of Yul</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#restrictions-on-the-grammar">Restrictions on the Grammar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scoping-rules">Scoping Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formal-specification">Formal Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#evm-dialect">EVM Dialect</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#datasize-dataoffset-datacopy">datasize, dataoffset, datacopy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#setimmutable-loadimmutable">setimmutable, loadimmutable</a></li>
<li class="toctree-l4"><a class="reference internal" href="#linkersymbol">linkersymbol</a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryguard">memoryguard</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verbatim">verbatim</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#specification-of-yul-object">Specification of Yul Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="#yul-optimizer">Yul Optimizer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#optimization-step-sequence">Optimization Step Sequence</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#complete-erc20-example">Complete ERC20 Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="style-guide.html">Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-patterns.html">Common Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">List of Known Bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="brand-guide.html">Solidity Brand Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="language-influences.html">Language Influences</a></li>
</ul>

    <ul>
        <li>
            <a href="genindex.html">Keyword Index</a>
        </li>
    </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #65afff" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Solidity</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Yul</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/yul.rst.txt" rel="nofollow"> نمایش متن منبع صفحه</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="yul">
<span id="id1"></span><h1>Yul<a class="headerlink" href="#yul" title="پیوند ثابت به این سر مقاله"></a></h1>
<p id="index-0">Yul (previously also called JULIA or IULIA) is an intermediate language that can be
compiled to bytecode for different backends.</p>
<p>Support for EVM 1.0, EVM 1.5 and Ewasm is planned, and it is designed to
be a usable common denominator of all three
platforms. It can already be used in stand-alone mode and
for &quot;inline assembly&quot; inside Solidity
and there is an experimental implementation of the Solidity compiler
that uses Yul as an intermediate language. Yul is a good target for
high-level optimisation stages that can benefit all target platforms equally.</p>
<section id="motivation-and-high-level-description">
<h2>Motivation and High-level Description<a class="headerlink" href="#motivation-and-high-level-description" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>The design of Yul tries to achieve several goals:</p>
<ol class="arabic simple">
<li><p>Programs written in Yul should be readable, even if the code is generated by a compiler from Solidity or another high-level language.</p></li>
<li><p>Control flow should be easy to understand to help in manual inspection, formal verification and optimization.</p></li>
<li><p>The translation from Yul to bytecode should be as straightforward as possible.</p></li>
<li><p>Yul should be suitable for whole-program optimization.</p></li>
</ol>
<p>In order to achieve the first and second goal, Yul provides high-level constructs
like <code class="docutils literal notranslate"><span class="pre">for</span></code> loops, <code class="docutils literal notranslate"><span class="pre">if</span></code> and <code class="docutils literal notranslate"><span class="pre">switch</span></code> statements and function calls. These should
be sufficient for adequately representing the control flow for assembly programs.
Therefore, no explicit statements for <code class="docutils literal notranslate"><span class="pre">SWAP</span></code>, <code class="docutils literal notranslate"><span class="pre">DUP</span></code>, <code class="docutils literal notranslate"><span class="pre">JUMPDEST</span></code>, <code class="docutils literal notranslate"><span class="pre">JUMP</span></code> and <code class="docutils literal notranslate"><span class="pre">JUMPI</span></code>
are provided, because the first two obfuscate the data flow
and the last two obfuscate control flow. Furthermore, functional statements of
the form <code class="docutils literal notranslate"><span class="pre">mul(add(x,</span> <span class="pre">y),</span> <span class="pre">7)</span></code> are preferred over pure opcode statements like
<code class="docutils literal notranslate"><span class="pre">7</span> <span class="pre">y</span> <span class="pre">x</span> <span class="pre">add</span> <span class="pre">mul</span></code> because in the first form, it is much easier to see which
operand is used for which opcode.</p>
<p>Even though it was designed for stack machines, Yul does not expose the complexity of the stack itself.
The programmer or auditor should not have to worry about the stack.</p>
<p>The third goal is achieved by compiling the
higher level constructs to bytecode in a very regular way.
The only non-local operation performed
by the assembler is name lookup of user-defined identifiers (functions, variables, ...)
and cleanup of local variables from the stack.</p>
<p>To avoid confusions between concepts like values and references,
Yul is statically typed. At the same time, there is a default type
(usually the integer word of the target machine) that can always
be omitted to help readability.</p>
<p>To keep the language simple and flexible, Yul does not have
any built-in operations, functions or types in its pure form.
These are added together with their semantics when specifying a dialect of Yul,
which allows specializing Yul to the requirements of different
target platforms and feature sets.</p>
<p>Currently, there is only one specified dialect of Yul. This dialect uses
the EVM opcodes as builtin functions
(see below) and defines only the type <code class="docutils literal notranslate"><span class="pre">u256</span></code>, which is the native 256-bit
type of the EVM. Because of that, we will not provide types in the examples below.</p>
</section>
<section id="simple-example">
<h2>Simple Example<a class="headerlink" href="#simple-example" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>The following example program is written in the EVM dialect and computes exponentiation.
It can be compiled using <code class="docutils literal notranslate"><span class="pre">solc</span> <span class="pre">--strict-assembly</span></code>. The builtin functions
<code class="docutils literal notranslate"><span class="pre">mul</span></code> and <code class="docutils literal notranslate"><span class="pre">div</span></code> compute product and division, respectively.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=ewogICAgZnVuY3Rpb24gcG93ZXIoYmFzZSwgZXhwb25lbnQpIC0+IHJlc3VsdAogICAgewogICAgICAgIHN3aXRjaCBleHBvbmVudAogICAgICAgIGNhc2UgMCB7IHJlc3VsdCA6PSAxIH0KICAgICAgICBjYXNlIDEgeyByZXN1bHQgOj0gYmFzZSB9CiAgICAgICAgZGVmYXVsdAogICAgICAgIHsKICAgICAgICAgICAgcmVzdWx0IDo9IHBvd2VyKG11bChiYXNlLCBiYXNlKSwgZGl2KGV4cG9uZW50LCAyKSkKICAgICAgICAgICAgc3dpdGNoIG1vZChleHBvbmVudCwgMikKICAgICAgICAgICAgICAgIGNhc2UgMSB7IHJlc3VsdCA6PSBtdWwoYmFzZSwgcmVzdWx0KSB9CiAgICAgICAgfQogICAgfQp9"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="k">function</span> <span class="n">power</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">result</span>
    <span class="p">{</span>
        <span class="k">switch</span> <span class="n">exponent</span>
        <span class="k">case</span> <span class="mi">0</span> <span class="p">{</span> <span class="n">result</span> <span class="o">:=</span> <span class="mi">1</span> <span class="p">}</span>
        <span class="k">case</span> <span class="mi">1</span> <span class="p">{</span> <span class="n">result</span> <span class="o">:=</span> <span class="n">base</span> <span class="p">}</span>
        <span class="k">default</span>
        <span class="p">{</span>
            <span class="n">result</span> <span class="o">:=</span> <span class="n">power</span><span class="p">(</span><span class="nf">mul</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="p">),</span> <span class="nf">div</span><span class="p">(</span><span class="n">exponent</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
            <span class="k">switch</span> <span class="nf">mod</span><span class="p">(</span><span class="n">exponent</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="k">case</span> <span class="mi">1</span> <span class="p">{</span> <span class="n">result</span> <span class="o">:=</span> <span class="nf">mul</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is also possible to implement the same function using a for-loop
instead of with recursion. Here, <code class="docutils literal notranslate"><span class="pre">lt(a,</span> <span class="pre">b)</span></code> computes whether <code class="docutils literal notranslate"><span class="pre">a</span></code> is less than <code class="docutils literal notranslate"><span class="pre">b</span></code>.
less-than comparison.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=ewogICAgZnVuY3Rpb24gcG93ZXIoYmFzZSwgZXhwb25lbnQpIC0+IHJlc3VsdAogICAgewogICAgICAgIHJlc3VsdCA6PSAxCiAgICAgICAgZm9yIHsgbGV0IGkgOj0gMCB9IGx0KGksIGV4cG9uZW50KSB7IGkgOj0gYWRkKGksIDEpIH0KICAgICAgICB7CiAgICAgICAgICAgIHJlc3VsdCA6PSBtdWwocmVzdWx0LCBiYXNlKQogICAgICAgIH0KICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="k">function</span> <span class="n">power</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">result</span>
    <span class="p">{</span>
        <span class="n">result</span> <span class="o">:=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="p">{</span> <span class="ow">let</span> <span class="nv">i</span> <span class="o">:=</span> <span class="mi">0</span> <span class="p">}</span> <span class="nf">lt</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span> <span class="p">{</span> <span class="n">i</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="p">}</span>
        <span class="p">{</span>
            <span class="n">result</span> <span class="o">:=</span> <span class="nf">mul</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>At the <a class="reference internal" href="#erc20yul"><span class="std std-ref">end of the section</span></a>, a complete implementation of
the ERC-20 standard can be found.</p>
</section>
<section id="stand-alone-usage">
<h2>Stand-Alone Usage<a class="headerlink" href="#stand-alone-usage" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>You can use Yul in its stand-alone form in the EVM dialect using the Solidity compiler.
This will use the <a class="reference internal" href="#yul-object"><span class="std std-ref">Yul object notation</span></a> so that it is possible to refer
to code as data to deploy contracts. This Yul mode is available for the commandline compiler
(use <code class="docutils literal notranslate"><span class="pre">--strict-assembly</span></code>) and for the <a class="reference internal" href="using-the-compiler.html#compiler-api"><span class="std std-ref">standard-json interface</span></a>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;language&quot;</span><span class="p">:</span> <span class="s2">&quot;Yul&quot;</span><span class="p">,</span>
    <span class="nt">&quot;sources&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;input.yul&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;{ sstore(0, 1) }&quot;</span> <span class="p">}</span> <span class="p">},</span>
    <span class="nt">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;outputSelection&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;*&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;*&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span> <span class="nt">&quot;&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">]</span> <span class="p">}</span> <span class="p">},</span>
        <span class="nt">&quot;optimizer&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nt">&quot;details&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;yul&quot;</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>Yul is in active development and bytecode generation is only fully implemented for the EVM dialect of Yul
with EVM 1.0 as target.</p>
</div>
</section>
<section id="informal-description-of-yul">
<h2>Informal Description of Yul<a class="headerlink" href="#informal-description-of-yul" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>In the following, we will talk about each individual aspect
of the Yul language. In examples, we will use the default EVM dialect.</p>
<section id="syntax">
<h3>Syntax<a class="headerlink" href="#syntax" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>Yul parses comments, literals and identifiers in the same way as Solidity,
so you can e.g. use <code class="docutils literal notranslate"><span class="pre">//</span></code> and <code class="docutils literal notranslate"><span class="pre">/*</span> <span class="pre">*/</span></code> to denote comments.
There is one exception: Identifiers in Yul can contain dots: <code class="docutils literal notranslate"><span class="pre">.</span></code>.</p>
<p>Yul can specify &quot;objects&quot; that consist of code, data and sub-objects.
Please see <a class="reference internal" href="#yul-object"><span class="std std-ref">Yul Objects</span></a> below for details on that.
In this section, we are only concerned with the code part of such an object.
This code part always consists of a curly-braces
delimited block. Most tools support specifying just a code block
where an object is expected.</p>
<p>Inside a code block, the following elements can be used
(see the later sections for more details):</p>
<ul class="simple">
<li><p>literals, i.e. <code class="docutils literal notranslate"><span class="pre">0x123</span></code>, <code class="docutils literal notranslate"><span class="pre">42</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;abc&quot;</span></code> (strings up to 32 characters)</p></li>
<li><p>calls to builtin functions, e.g. <code class="docutils literal notranslate"><span class="pre">add(1,</span> <span class="pre">mload(0))</span></code></p></li>
<li><p>variable declarations, e.g. <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">x</span> <span class="pre">:=</span> <span class="pre">7</span></code>, <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">x</span> <span class="pre">:=</span> <span class="pre">add(y,</span> <span class="pre">3)</span></code> or <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">x</span></code> (initial value of 0 is assigned)</p></li>
<li><p>identifiers (variables), e.g. <code class="docutils literal notranslate"><span class="pre">add(3,</span> <span class="pre">x)</span></code></p></li>
<li><p>assignments, e.g. <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:=</span> <span class="pre">add(y,</span> <span class="pre">3)</span></code></p></li>
<li><p>blocks where local variables are scoped inside, e.g. <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">let</span> <span class="pre">x</span> <span class="pre">:=</span> <span class="pre">3</span> <span class="pre">{</span> <span class="pre">let</span> <span class="pre">y</span> <span class="pre">:=</span> <span class="pre">add(x,</span> <span class="pre">1)</span> <span class="pre">}</span> <span class="pre">}</span></code></p></li>
<li><p>if statements, e.g. <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">lt(a,</span> <span class="pre">b)</span> <span class="pre">{</span> <span class="pre">sstore(0,</span> <span class="pre">1)</span> <span class="pre">}</span></code></p></li>
<li><p>switch statements, e.g. <code class="docutils literal notranslate"><span class="pre">switch</span> <span class="pre">mload(0)</span> <span class="pre">case</span> <span class="pre">0</span> <span class="pre">{</span> <span class="pre">revert()</span> <span class="pre">}</span> <span class="pre">default</span> <span class="pre">{</span> <span class="pre">mstore(0,</span> <span class="pre">1)</span> <span class="pre">}</span></code></p></li>
<li><p>for loops, e.g. <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">{</span> <span class="pre">let</span> <span class="pre">i</span> <span class="pre">:=</span> <span class="pre">0}</span> <span class="pre">lt(i,</span> <span class="pre">10)</span> <span class="pre">{</span> <span class="pre">i</span> <span class="pre">:=</span> <span class="pre">add(i,</span> <span class="pre">1)</span> <span class="pre">}</span> <span class="pre">{</span> <span class="pre">mstore(i,</span> <span class="pre">7)</span> <span class="pre">}</span></code></p></li>
<li><p>function definitions, e.g. <code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">f(a,</span> <span class="pre">b)</span> <span class="pre">-&gt;</span> <span class="pre">c</span> <span class="pre">{</span> <span class="pre">c</span> <span class="pre">:=</span> <span class="pre">add(a,</span> <span class="pre">b)</span> <span class="pre">}`</span></code></p></li>
</ul>
<p>Multiple syntactical elements can follow each other simply separated by
whitespace, i.e. there is no terminating <code class="docutils literal notranslate"><span class="pre">;</span></code> or newline required.</p>
</section>
<section id="literals">
<h3>Literals<a class="headerlink" href="#literals" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>As literals, you can use:</p>
<ul class="simple">
<li><p>Integer constants in decimal or hexadecimal notation.</p></li>
<li><p>ASCII strings (e.g. <code class="docutils literal notranslate"><span class="pre">&quot;abc&quot;</span></code>), which may contain hex escapes <code class="docutils literal notranslate"><span class="pre">\xNN</span></code> and Unicode escapes <code class="docutils literal notranslate"><span class="pre">\uNNNN</span></code> where <code class="docutils literal notranslate"><span class="pre">N</span></code> are hexadecimal digits.</p></li>
<li><p>Hex strings (e.g. <code class="docutils literal notranslate"><span class="pre">hex&quot;616263&quot;</span></code>).</p></li>
</ul>
<p>In the EVM dialect of Yul, literals represent 256-bit words as follows:</p>
<ul class="simple">
<li><p>Decimal or hexadecimal constants must be less than <code class="docutils literal notranslate"><span class="pre">2**256</span></code>.
They represent the 256-bit word with that value as an unsigned integer in big endian encoding.</p></li>
<li><p>An ASCII string is first viewed as a byte sequence, by viewing
a non-escape ASCII character as a single byte whose value is the ASCII code,
an escape <code class="docutils literal notranslate"><span class="pre">\xNN</span></code> as single byte with that value, and
an escape <code class="docutils literal notranslate"><span class="pre">\uNNNN</span></code> as the UTF-8 sequence of bytes for that code point.
The byte sequence must not exceed 32 bytes.
The byte sequence is padded with zeros on the right to reach 32 bytes in length;
in other words, the string is stored left-aligned.
The padded byte sequence represents a 256-bit word whose most significant 8 bits are the ones from the first byte,
i.e. the bytes are interpreted in big endian form.</p></li>
<li><p>A hex string is first viewed as a byte sequence, by viewing
each pair of contiguous hex digits as a byte.
The byte sequence must not exceed 32 bytes (i.e. 64 hex digits), and is treated as above.</p></li>
</ul>
<p>When compiling for the EVM, this will be translated into an
appropriate <code class="docutils literal notranslate"><span class="pre">PUSHi</span></code> instruction. In the following example,
<code class="docutils literal notranslate"><span class="pre">3</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code> are added resulting in 5 and then the
bitwise <code class="docutils literal notranslate"><span class="pre">and</span></code> with the string &quot;abc&quot; is computed.
The final value is assigned to a local variable called <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>The 32-byte limit above does not apply to string literals passed to builtin functions that require
literal arguments (e.g. <code class="docutils literal notranslate"><span class="pre">setimmutable</span></code> or <code class="docutils literal notranslate"><span class="pre">loadimmutable</span></code>). Those strings never end up in the
generated bytecode.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=bGV0IHggOj0gYW5kKCJhYmMiLCBhZGQoMywgMikp"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="ow">let</span> <span class="nv">x</span> <span class="o">:=</span> <span class="nf">and</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="nf">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Unless it is the default type, the type of a literal
has to be specified after a colon:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=Ly8gVGhpcyB3aWxsIG5vdCBjb21waWxlICh1MzIgYW5kIHUyNTYgdHlwZSBub3QgaW1wbGVtZW50ZWQgeWV0KQpsZXQgeCA6PSBhbmQoImFiYyI6dTMyLCBhZGQoMzp1MjU2LCAyOnUyNTYpKQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="c1">// This will not compile (u32 and u256 type not implemented yet)</span>
<span class="ow">let</span> <span class="nv">x</span> <span class="o">:=</span> <span class="nf">and</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">:</span><span class="n">u32</span><span class="p">,</span> <span class="nf">add</span><span class="p">(</span><span class="mi">3</span><span class="p">:</span><span class="n">u256</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="n">u256</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="function-calls">
<h3>Function Calls<a class="headerlink" href="#function-calls" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>Both built-in and user-defined functions (see below) can be called
in the same way as shown in the previous example.
If the function returns a single value, it can be directly used
inside an expression again. If it returns multiple values,
they have to be assigned to local variables.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=ZnVuY3Rpb24gZih4LCB5KSAtPiBhLCBiIHsgLyogLi4uICovIH0KbXN0b3JlKDB4ODAsIGFkZChtbG9hZCgweDgwKSwgMykpCi8vIEhlcmUsIHRoZSB1c2VyLWRlZmluZWQgZnVuY3Rpb24gYGZgIHJldHVybnMgdHdvIHZhbHVlcy4KbGV0IHgsIHkgOj0gZigxLCBtbG9hZCgwKSk="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="k">function</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
<span class="nf">mstore</span><span class="p">(</span><span class="mh">0x80</span><span class="p">,</span> <span class="nf">add</span><span class="p">(</span><span class="nf">mload</span><span class="p">(</span><span class="mh">0x80</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<span class="c1">// Here, the user-defined function `f` returns two values.</span>
<span class="ow">let</span> <span class="nv">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">mload</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>For built-in functions of the EVM, functional expressions
can be directly translated to a stream of opcodes:
You just read the expression from right to left to obtain the
opcodes. In the case of the first line in the example, this
is <code class="docutils literal notranslate"><span class="pre">PUSH1</span> <span class="pre">3</span> <span class="pre">PUSH1</span> <span class="pre">0x80</span> <span class="pre">MLOAD</span> <span class="pre">ADD</span> <span class="pre">PUSH1</span> <span class="pre">0x80</span> <span class="pre">MSTORE</span></code>.</p>
<p>For calls to user-defined functions, the arguments are also
put on the stack from right to left and this is the order
in which argument lists are evaluated. The return values,
though, are expected on the stack from left to right,
i.e. in this example, <code class="docutils literal notranslate"><span class="pre">y</span></code> is on top of the stack and <code class="docutils literal notranslate"><span class="pre">x</span></code>
is below it.</p>
</section>
<section id="variable-declarations">
<h3>Variable Declarations<a class="headerlink" href="#variable-declarations" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">let</span></code> keyword to declare variables.
A variable is only visible inside the
<code class="docutils literal notranslate"><span class="pre">{...}</span></code>-block it was defined in. When compiling to the EVM,
a new stack slot is created that is reserved
for the variable and automatically removed again when the end of the block
is reached. You can provide an initial value for the variable.
If you do not provide a value, the variable will be initialized to zero.</p>
<p>Since variables are stored on the stack, they do not directly
influence memory or storage, but they can be used as pointers
to memory or storage locations in the built-in functions
<code class="docutils literal notranslate"><span class="pre">mstore</span></code>, <code class="docutils literal notranslate"><span class="pre">mload</span></code>, <code class="docutils literal notranslate"><span class="pre">sstore</span></code> and <code class="docutils literal notranslate"><span class="pre">sload</span></code>.
Future dialects might introduce specific types for such pointers.</p>
<p>When a variable is referenced, its current value is copied.
For the EVM, this translates to a <code class="docutils literal notranslate"><span class="pre">DUP</span></code> instruction.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=ewogICAgbGV0IHplcm8gOj0gMAogICAgbGV0IHYgOj0gY2FsbGRhdGFsb2FkKHplcm8pCiAgICB7CiAgICAgICAgbGV0IHkgOj0gYWRkKHNsb2FkKHYpLCAxKQogICAgICAgIHYgOj0geQogICAgfSAvLyB5IGlzICJkZWFsbG9jYXRlZCIgaGVyZQogICAgc3N0b3JlKHYsIHplcm8pCn0gLy8gdiBhbmQgemVybyBhcmUgImRlYWxsb2NhdGVkIiBoZXJl"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="ow">let</span> <span class="nv">zero</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="ow">let</span> <span class="nv">v</span> <span class="o">:=</span> <span class="nf">calldataload</span><span class="p">(</span><span class="n">zero</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="ow">let</span> <span class="nv">y</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="nf">sload</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">:=</span> <span class="n">y</span>
    <span class="p">}</span> <span class="c1">// y is &quot;deallocated&quot; here</span>
    <span class="nf">sstore</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">zero</span><span class="p">)</span>
<span class="p">}</span> <span class="c1">// v and zero are &quot;deallocated&quot; here</span>
</pre></div>
</div>
<p>If the declared variable should have a type different from the default type,
you denote that following a colon. You can also declare multiple
variables in one statement when you assign from a function call
that returns multiple values.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=Ly8gVGhpcyB3aWxsIG5vdCBjb21waWxlICh1MzIgYW5kIHUyNTYgdHlwZSBub3QgaW1wbGVtZW50ZWQgeWV0KQp7CiAgICBsZXQgemVybzp1MzIgOj0gMDp1MzIKICAgIGxldCB2OnUyNTYsIHQ6dTMyIDo9IGYoKQogICAgbGV0IHgsIHkgOj0gZygpCn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="c1">// This will not compile (u32 and u256 type not implemented yet)</span>
<span class="p">{</span>
    <span class="ow">let</span> <span class="nv">zero</span><span class="p">:</span><span class="n">u32</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">:</span><span class="n">u32</span>
    <span class="ow">let</span> <span class="nv">v</span><span class="p">:</span><span class="n">u256</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span><span class="n">u32</span> <span class="o">:=</span> <span class="n">f</span><span class="p">()</span>
    <span class="ow">let</span> <span class="nv">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">g</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Depending on the optimiser settings, the compiler can free the stack slots
already after the variable has been used for
the last time, even though it is still in scope.</p>
</section>
<section id="assignments">
<h3>Assignments<a class="headerlink" href="#assignments" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>Variables can be assigned to after their definition using the
<code class="docutils literal notranslate"><span class="pre">:=</span></code> operator. It is possible to assign multiple
variables at the same time. For this, the number and types of the
values have to match.
If you want to assign the values returned from a function that has
multiple return parameters, you have to provide multiple variables.
The same variable may not occur multiple times on the left-hand side of
an assignment, e.g. <code class="docutils literal notranslate"><span class="pre">x,</span> <span class="pre">x</span> <span class="pre">:=</span> <span class="pre">f()</span></code> is invalid.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=bGV0IHYgOj0gMAovLyByZS1hc3NpZ24gdgp2IDo9IDIKbGV0IHQgOj0gYWRkKHYsIDIpCmZ1bmN0aW9uIGYoKSAtPiBhLCBiIHsgfQovLyBhc3NpZ24gbXVsdGlwbGUgdmFsdWVzCnYsIHQgOj0gZigp"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="ow">let</span> <span class="nv">v</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="c1">// re-assign v</span>
<span class="n">v</span> <span class="o">:=</span> <span class="mi">2</span>
<span class="ow">let</span> <span class="nv">t</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">function</span> <span class="n">f</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="p">{</span> <span class="p">}</span>
<span class="c1">// assign multiple values</span>
<span class="n">v</span><span class="p">,</span> <span class="n">t</span> <span class="o">:=</span> <span class="n">f</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="if">
<h3>If<a class="headerlink" href="#if" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>The if statement can be used for conditionally executing code.
No &quot;else&quot; block can be defined. Consider using &quot;switch&quot; instead (see below) if
you need multiple alternatives.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=aWYgbHQoY2FsbGRhdGFzaXplKCksIDQpIHsgcmV2ZXJ0KDAsIDApIH0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="nf">lt</span><span class="p">(</span><span class="nf">calldatasize</span><span class="p">(),</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span> <span class="nf">revert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">}</span>
</pre></div>
</div>
<p>The curly braces for the body are required.</p>
</section>
<section id="switch">
<h3>Switch<a class="headerlink" href="#switch" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>You can use a switch statement as an extended version of the if statement.
It takes the value of an expression and compares it to several literal constants.
The branch corresponding to the matching constant is taken.
Contrary to other programming languages, for safety reasons, control flow does
not continue from one case to the next. There can be a fallback or default
case called <code class="docutils literal notranslate"><span class="pre">default</span></code> which is taken if none of the literal constants matches.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=ewogICAgbGV0IHggOj0gMAogICAgc3dpdGNoIGNhbGxkYXRhbG9hZCg0KQogICAgY2FzZSAwIHsKICAgICAgICB4IDo9IGNhbGxkYXRhbG9hZCgweDI0KQogICAgfQogICAgZGVmYXVsdCB7CiAgICAgICAgeCA6PSBjYWxsZGF0YWxvYWQoMHg0NCkKICAgIH0KICAgIHNzdG9yZSgwLCBkaXYoeCwgMikpCn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="ow">let</span> <span class="nv">x</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="k">switch</span> <span class="nf">calldataload</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">case</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="n">x</span> <span class="o">:=</span> <span class="nf">calldataload</span><span class="p">(</span><span class="mh">0x24</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">default</span> <span class="p">{</span>
        <span class="n">x</span> <span class="o">:=</span> <span class="nf">calldataload</span><span class="p">(</span><span class="mh">0x44</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nf">sstore</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nf">div</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The list of cases is not enclosed by curly braces, but the body of a
case does require them.</p>
</section>
<section id="loops">
<h3>Loops<a class="headerlink" href="#loops" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>Yul supports for-loops which consist of
a header containing an initializing part, a condition, a post-iteration
part and a body. The condition has to be an expression, while
the other three are blocks. If the initializing part
declares any variables at the top level, the scope of these variables extends to all other
parts of the loop.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">break</span></code> and <code class="docutils literal notranslate"><span class="pre">continue</span></code> statements can be used in the body to exit the loop
or skip to the post-part, respectively.</p>
<p>The following example computes the sum of an area in memory.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=ewogICAgbGV0IHggOj0gMAogICAgZm9yIHsgbGV0IGkgOj0gMCB9IGx0KGksIDB4MTAwKSB7IGkgOj0gYWRkKGksIDB4MjApIH0gewogICAgICAgIHggOj0gYWRkKHgsIG1sb2FkKGkpKQogICAgfQp9"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="ow">let</span> <span class="nv">x</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="p">{</span> <span class="ow">let</span> <span class="nv">i</span> <span class="o">:=</span> <span class="mi">0</span> <span class="p">}</span> <span class="nf">lt</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">)</span> <span class="p">{</span> <span class="n">i</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">)</span> <span class="p">}</span> <span class="p">{</span>
        <span class="n">x</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nf">mload</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For loops can also be used as a replacement for while loops:
Simply leave the initialization and post-iteration parts empty.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=ewogICAgbGV0IHggOj0gMAogICAgbGV0IGkgOj0gMAogICAgZm9yIHsgfSBsdChpLCAweDEwMCkgeyB9IHsgICAgIC8vIHdoaWxlKGkgPCAweDEwMCkKICAgICAgICB4IDo9IGFkZCh4LCBtbG9hZChpKSkKICAgICAgICBpIDo9IGFkZChpLCAweDIwKQogICAgfQp9"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="ow">let</span> <span class="nv">x</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="ow">let</span> <span class="nv">i</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="p">{</span> <span class="p">}</span> <span class="nf">lt</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mh">0x100</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span> <span class="p">{</span>     <span class="c1">// while(i &lt; 0x100)</span>
        <span class="n">x</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nf">mload</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">i</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="function-declarations">
<h3>Function Declarations<a class="headerlink" href="#function-declarations" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>Yul allows the definition of functions. These should not be confused with functions
in Solidity since they are never part of an external interface of a contract and
are part of a namespace separate from the one for Solidity functions.</p>
<p>For the EVM, Yul functions take their
arguments (and a return PC) from the stack and also put the results onto the
stack. User-defined functions and built-in functions are called in exactly the same way.</p>
<p>Functions can be defined anywhere and are visible in the block they are
declared in. Inside a function, you cannot access local variables
defined outside of that function.</p>
<p>Functions declare parameters and return variables, similar to Solidity.
To return a value, you assign it to the return variable(s).</p>
<p>If you call a function that returns multiple values, you have to assign
them to multiple variables using <code class="docutils literal notranslate"><span class="pre">a,</span> <span class="pre">b</span> <span class="pre">:=</span> <span class="pre">f(x)</span></code> or <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">a,</span> <span class="pre">b</span> <span class="pre">:=</span> <span class="pre">f(x)</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">leave</span></code> statement can be used to exit the current function. It
works like the <code class="docutils literal notranslate"><span class="pre">return</span></code> statement in other languages just that it does
not take a value to return, it just exits the functions and the function
will return whatever values are currently assigned to the return variable(s).</p>
<p>Note that the EVM dialect has a built-in function called <code class="docutils literal notranslate"><span class="pre">return</span></code> that
quits the full execution context (internal message call) and not just
the current yul function.</p>
<p>The following example implements the power function by square-and-multiply.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=ewogICAgZnVuY3Rpb24gcG93ZXIoYmFzZSwgZXhwb25lbnQpIC0+IHJlc3VsdCB7CiAgICAgICAgc3dpdGNoIGV4cG9uZW50CiAgICAgICAgY2FzZSAwIHsgcmVzdWx0IDo9IDEgfQogICAgICAgIGNhc2UgMSB7IHJlc3VsdCA6PSBiYXNlIH0KICAgICAgICBkZWZhdWx0IHsKICAgICAgICAgICAgcmVzdWx0IDo9IHBvd2VyKG11bChiYXNlLCBiYXNlKSwgZGl2KGV4cG9uZW50LCAyKSkKICAgICAgICAgICAgc3dpdGNoIG1vZChleHBvbmVudCwgMikKICAgICAgICAgICAgICAgIGNhc2UgMSB7IHJlc3VsdCA6PSBtdWwoYmFzZSwgcmVzdWx0KSB9CiAgICAgICAgfQogICAgfQp9"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="k">function</span> <span class="n">power</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">exponent</span>
        <span class="k">case</span> <span class="mi">0</span> <span class="p">{</span> <span class="n">result</span> <span class="o">:=</span> <span class="mi">1</span> <span class="p">}</span>
        <span class="k">case</span> <span class="mi">1</span> <span class="p">{</span> <span class="n">result</span> <span class="o">:=</span> <span class="n">base</span> <span class="p">}</span>
        <span class="k">default</span> <span class="p">{</span>
            <span class="n">result</span> <span class="o">:=</span> <span class="n">power</span><span class="p">(</span><span class="nf">mul</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">base</span><span class="p">),</span> <span class="nf">div</span><span class="p">(</span><span class="n">exponent</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
            <span class="k">switch</span> <span class="nf">mod</span><span class="p">(</span><span class="n">exponent</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="k">case</span> <span class="mi">1</span> <span class="p">{</span> <span class="n">result</span> <span class="o">:=</span> <span class="nf">mul</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="specification-of-yul">
<h2>Specification of Yul<a class="headerlink" href="#specification-of-yul" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>This chapter describes Yul code formally. Yul code is usually placed inside Yul objects,
which are explained in their own chapter.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Block = &#39;{&#39; Statement* &#39;}&#39;
Statement =
    Block |
    FunctionDefinition |
    VariableDeclaration |
    Assignment |
    If |
    Expression |
    Switch |
    ForLoop |
    BreakContinue |
    Leave
FunctionDefinition =
    &#39;function&#39; Identifier &#39;(&#39; TypedIdentifierList? &#39;)&#39;
    ( &#39;-&gt;&#39; TypedIdentifierList )? Block
VariableDeclaration =
    &#39;let&#39; TypedIdentifierList ( &#39;:=&#39; Expression )?
Assignment =
    IdentifierList &#39;:=&#39; Expression
Expression =
    FunctionCall | Identifier | Literal
If =
    &#39;if&#39; Expression Block
Switch =
    &#39;switch&#39; Expression ( Case+ Default? | Default )
Case =
    &#39;case&#39; Literal Block
Default =
    &#39;default&#39; Block
ForLoop =
    &#39;for&#39; Block Expression Block Block
BreakContinue =
    &#39;break&#39; | &#39;continue&#39;
Leave = &#39;leave&#39;
FunctionCall =
    Identifier &#39;(&#39; ( Expression ( &#39;,&#39; Expression )* )? &#39;)&#39;
Identifier = [a-zA-Z_$] [a-zA-Z_$0-9.]*
IdentifierList = Identifier ( &#39;,&#39; Identifier)*
TypeName = Identifier
TypedIdentifierList = Identifier ( &#39;:&#39; TypeName )? ( &#39;,&#39; Identifier ( &#39;:&#39; TypeName )? )*
Literal =
    (NumberLiteral | StringLiteral | TrueLiteral | FalseLiteral) ( &#39;:&#39; TypeName )?
NumberLiteral = HexNumber | DecimalNumber
StringLiteral = &#39;&quot;&#39; ([^&quot;\r\n\\] | &#39;\\&#39; .)* &#39;&quot;&#39;
TrueLiteral = &#39;true&#39;
FalseLiteral = &#39;false&#39;
HexNumber = &#39;0x&#39; [0-9a-fA-F]+
DecimalNumber = [0-9]+
</pre></div>
</div>
<section id="restrictions-on-the-grammar">
<h3>Restrictions on the Grammar<a class="headerlink" href="#restrictions-on-the-grammar" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>Apart from those directly imposed by the grammar, the following
restrictions apply:</p>
<p>Switches must have at least one case (including the default case).
All case values need to have the same type and distinct values.
If all possible values of the expression type are covered, a default case is
not allowed (i.e. a switch with a <code class="docutils literal notranslate"><span class="pre">bool</span></code> expression that has both a
true and a false case do not allow a default case).</p>
<p>Every expression evaluates to zero or more values. Identifiers and Literals
evaluate to exactly
one value and function calls evaluate to a number of values equal to the
number of return variables of the function called.</p>
<p>In variable declarations and assignments, the right-hand-side expression
(if present) has to evaluate to a number of values equal to the number of
variables on the left-hand-side.
This is the only situation where an expression evaluating
to more than one value is allowed.
The same variable name cannot occur more than once in the left-hand-side of
an assignment or variable declaration.</p>
<p>Expressions that are also statements (i.e. at the block level) have to
evaluate to zero values.</p>
<p>In all other situations, expressions have to evaluate to exactly one value.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">continue</span></code> and <code class="docutils literal notranslate"><span class="pre">break</span></code> statements can only be used inside loop bodies
and have to be in the same function as the loop (or both have to be at the
top level). The <code class="docutils literal notranslate"><span class="pre">continue</span></code> and <code class="docutils literal notranslate"><span class="pre">break</span></code> statements cannot be used
in other parts of a loop, not even when it is scoped inside a second loop's body.</p>
<p>The condition part of the for-loop has to evaluate to exactly one value.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">leave</span></code> statement can only be used inside a function.</p>
<p>Functions cannot be defined anywhere inside for loop init blocks.</p>
<p>Literals cannot be larger than their type. The largest type defined is 256-bit wide.</p>
<p>During assignments and function calls, the types of the respective values have to match.
There is no implicit type conversion. Type conversion in general can only be achieved
if the dialect provides an appropriate built-in function that takes a value of one
type and returns a value of a different type.</p>
</section>
<section id="scoping-rules">
<h3>Scoping Rules<a class="headerlink" href="#scoping-rules" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>Scopes in Yul are tied to Blocks (exceptions are functions and the for loop
as explained below) and all declarations
(<code class="docutils literal notranslate"><span class="pre">FunctionDefinition</span></code>, <code class="docutils literal notranslate"><span class="pre">VariableDeclaration</span></code>)
introduce new identifiers into these scopes.</p>
<p>Identifiers are visible in
the block they are defined in (including all sub-nodes and sub-blocks):
Functions are visible in the whole block (even before their definitions) while
variables are only visible starting from the statement after the <code class="docutils literal notranslate"><span class="pre">VariableDeclaration</span></code>.</p>
<p>In particular,
variables cannot be referenced in the right hand side of their own variable
declaration.
Functions can be referenced already before their declaration (if they are visible).</p>
<p>As an exception to the general scoping rule, the scope of the &quot;init&quot; part of the for-loop
(the first block) extends across all other parts of the for loop.
This means that variables (and functions) declared in the init part (but not inside a
block inside the init part) are visible in all other parts of the for-loop.</p>
<p>Identifiers declared in the other parts of the for loop respect the regular
syntactical scoping rules.</p>
<p>This means a for-loop of the form <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">{</span> <span class="pre">I...</span> <span class="pre">}</span> <span class="pre">C</span> <span class="pre">{</span> <span class="pre">P...</span> <span class="pre">}</span> <span class="pre">{</span> <span class="pre">B...</span> <span class="pre">}</span></code> is equivalent
to <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">I...</span> <span class="pre">for</span> <span class="pre">{}</span> <span class="pre">C</span> <span class="pre">{</span> <span class="pre">P...</span> <span class="pre">}</span> <span class="pre">{</span> <span class="pre">B...</span> <span class="pre">}</span> <span class="pre">}</span></code>.</p>
<p>The parameters and return parameters of functions are visible in the
function body and their names have to be distinct.</p>
<p>Inside functions, it is not possible to reference a variable that was declared
outside of that function.</p>
<p>Shadowing is disallowed, i.e. you cannot declare an identifier at a point
where another identifier with the same name is also visible, even if it is
not possible to reference it because it was declared outside the current function.</p>
</section>
<section id="formal-specification">
<h3>Formal Specification<a class="headerlink" href="#formal-specification" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>We formally specify Yul by providing an evaluation function E overloaded
on the various nodes of the AST. As builtin functions can have side effects,
E takes two state objects and the AST node and returns two new
state objects and a variable number of other values.
The two state objects are the global state object
(which in the context of the EVM is the memory, storage and state of the
blockchain) and the local state object (the state of local variables, i.e. a
segment of the stack in the EVM).</p>
<p>If the AST node is a statement, E returns the two state objects and a &quot;mode&quot;,
which is used for the <code class="docutils literal notranslate"><span class="pre">break</span></code>, <code class="docutils literal notranslate"><span class="pre">continue</span></code> and <code class="docutils literal notranslate"><span class="pre">leave</span></code> statements.
If the AST node is an expression, E returns the two state objects and
as many values as the expression evaluates to.</p>
<p>The exact nature of the global state is unspecified for this high level
description. The local state <code class="docutils literal notranslate"><span class="pre">L</span></code> is a mapping of identifiers <code class="docutils literal notranslate"><span class="pre">i</span></code> to values <code class="docutils literal notranslate"><span class="pre">v</span></code>,
denoted as <code class="docutils literal notranslate"><span class="pre">L[i]</span> <span class="pre">=</span> <span class="pre">v</span></code>.</p>
<p>For an identifier <code class="docutils literal notranslate"><span class="pre">v</span></code>, let <code class="docutils literal notranslate"><span class="pre">$v</span></code> be the name of the identifier.</p>
<p>We will use a destructuring notation for the AST nodes.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>E(G, L, &lt;{St1, ..., Stn}&gt;: Block) =
    let G1, L1, mode = E(G, L, St1, ..., Stn)
    let L2 be a restriction of L1 to the identifiers of L
    G1, L2, mode
E(G, L, St1, ..., Stn: Statement) =
    if n is zero:
        G, L, regular
    else:
        let G1, L1, mode = E(G, L, St1)
        if mode is regular then
            E(G1, L1, St2, ..., Stn)
        otherwise
            G1, L1, mode
E(G, L, FunctionDefinition) =
    G, L, regular
E(G, L, &lt;let var_1, ..., var_n := rhs&gt;: VariableDeclaration) =
    E(G, L, &lt;var_1, ..., var_n := rhs&gt;: Assignment)
E(G, L, &lt;let var_1, ..., var_n&gt;: VariableDeclaration) =
    let L1 be a copy of L where L1[$var_i] = 0 for i = 1, ..., n
    G, L1, regular
E(G, L, &lt;var_1, ..., var_n := rhs&gt;: Assignment) =
    let G1, L1, v1, ..., vn = E(G, L, rhs)
    let L2 be a copy of L1 where L2[$var_i] = vi for i = 1, ..., n
    G, L2, regular
E(G, L, &lt;for { i1, ..., in } condition post body&gt;: ForLoop) =
    if n &gt;= 1:
        let G1, L, mode = E(G, L, i1, ..., in)
        // mode has to be regular or leave due to the syntactic restrictions
        if mode is leave then
            G1, L1 restricted to variables of L, leave
        otherwise
            let G2, L2, mode = E(G1, L1, for {} condition post body)
            G2, L2 restricted to variables of L, mode
    else:
        let G1, L1, v = E(G, L, condition)
        if v is false:
            G1, L1, regular
        else:
            let G2, L2, mode = E(G1, L, body)
            if mode is break:
                G2, L2, regular
            otherwise if mode is leave:
                G2, L2, leave
            else:
                G3, L3, mode = E(G2, L2, post)
                if mode is leave:
                    G2, L3, leave
                otherwise
                    E(G3, L3, for {} condition post body)
E(G, L, break: BreakContinue) =
    G, L, break
E(G, L, continue: BreakContinue) =
    G, L, continue
E(G, L, leave: Leave) =
    G, L, leave
E(G, L, &lt;if condition body&gt;: If) =
    let G0, L0, v = E(G, L, condition)
    if v is true:
        E(G0, L0, body)
    else:
        G0, L0, regular
E(G, L, &lt;switch condition case l1:t1 st1 ... case ln:tn stn&gt;: Switch) =
    E(G, L, switch condition case l1:t1 st1 ... case ln:tn stn default {})
E(G, L, &lt;switch condition case l1:t1 st1 ... case ln:tn stn default st&#39;&gt;: Switch) =
    let G0, L0, v = E(G, L, condition)
    // i = 1 .. n
    // Evaluate literals, context doesn&#39;t matter
    let _, _, v1 = E(G0, L0, l1)
    ...
    let _, _, vn = E(G0, L0, ln)
    if there exists smallest i such that vi = v:
        E(G0, L0, sti)
    else:
        E(G0, L0, st&#39;)

E(G, L, &lt;name&gt;: Identifier) =
    G, L, L[$name]
E(G, L, &lt;fname(arg1, ..., argn)&gt;: FunctionCall) =
    G1, L1, vn = E(G, L, argn)
    ...
    G(n-1), L(n-1), v2 = E(G(n-2), L(n-2), arg2)
    Gn, Ln, v1 = E(G(n-1), L(n-1), arg1)
    Let &lt;function fname (param1, ..., paramn) -&gt; ret1, ..., retm block&gt;
    be the function of name $fname visible at the point of the call.
    Let L&#39; be a new local state such that
    L&#39;[$parami] = vi and L&#39;[$reti] = 0 for all i.
    Let G&#39;&#39;, L&#39;&#39;, mode = E(Gn, L&#39;, block)
    G&#39;&#39;, Ln, L&#39;&#39;[$ret1], ..., L&#39;&#39;[$retm]
E(G, L, l: StringLiteral) = G, L, utf8EncodeLeftAligned(l),
    where utf8EncodeLeftAligned performs a UTF-8 encoding of l
    and aligns it left into 32 bytes
E(G, L, n: HexNumber) = G, L, hex(n)
    where hex is the hexadecimal decoding function
E(G, L, n: DecimalNumber) = G, L, dec(n),
    where dec is the decimal decoding function
</pre></div>
</div>
</section>
<section id="evm-dialect">
<span id="opcodes"></span><h3>EVM Dialect<a class="headerlink" href="#evm-dialect" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>The default dialect of Yul currently is the EVM dialect for the currently selected version of the EVM.
with a version of the EVM. The only type available in this dialect
is <code class="docutils literal notranslate"><span class="pre">u256</span></code>, the 256-bit native type of the Ethereum Virtual Machine.
Since it is the default type of this dialect, it can be omitted.</p>
<p>The following table lists all builtin functions
(depending on the EVM version) and provides a short description of the
semantics of the function / opcode.
This document does not want to be a full description of the Ethereum virtual machine.
Please refer to a different document if you are interested in the precise semantics.</p>
<p>Opcodes marked with <code class="docutils literal notranslate"><span class="pre">-</span></code> do not return a result and all others return exactly one value.
Opcodes marked with <code class="docutils literal notranslate"><span class="pre">F</span></code>, <code class="docutils literal notranslate"><span class="pre">H</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">C</span></code>, <code class="docutils literal notranslate"><span class="pre">I</span></code> and <code class="docutils literal notranslate"><span class="pre">L</span></code> are present since Frontier, Homestead,
Byzantium, Constantinople, Istanbul or London respectively.</p>
<p>In the following, <code class="docutils literal notranslate"><span class="pre">mem[a...b)</span></code> signifies the bytes of memory starting at position <code class="docutils literal notranslate"><span class="pre">a</span></code> up to
but not including position <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">storage[p]</span></code> signifies the storage contents at slot <code class="docutils literal notranslate"><span class="pre">p</span></code>.</p>
<p>Since Yul manages local variables and control-flow,
opcodes that interfere with these features are not available. This includes
the <code class="docutils literal notranslate"><span class="pre">dup</span></code> and <code class="docutils literal notranslate"><span class="pre">swap</span></code> instructions as well as <code class="docutils literal notranslate"><span class="pre">jump</span></code> instructions, labels and the <code class="docutils literal notranslate"><span class="pre">push</span></code> instructions.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 26%" />
<col style="width: 5%" />
<col style="width: 3%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Instruction</p></th>
<th class="head"></th>
<th class="head"></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>stop()</p></td>
<td rowspan="2"><p><cite>-</cite></p></td>
<td rowspan="2"><p>F</p></td>
<td rowspan="2"><p>stop execution, identical to return(0, 0)</p></td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>add(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>x + y</p></td>
</tr>
<tr class="row-odd"><td><p>sub(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>x - y</p></td>
</tr>
<tr class="row-even"><td><p>mul(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>x * y</p></td>
</tr>
<tr class="row-odd"><td><p>div(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>x / y or 0 if y == 0</p></td>
</tr>
<tr class="row-even"><td><p>sdiv(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>x / y, for signed numbers in two's complement, 0 if y == 0</p></td>
</tr>
<tr class="row-odd"><td><p>mod(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>x % y, 0 if y == 0</p></td>
</tr>
<tr class="row-even"><td><p>smod(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>x % y, for signed numbers in two's complement, 0 if y == 0</p></td>
</tr>
<tr class="row-odd"><td><p>exp(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>x to the power of y</p></td>
</tr>
<tr class="row-even"><td><p>not(x)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>bitwise &quot;not&quot; of x (every bit of x is negated)</p></td>
</tr>
<tr class="row-odd"><td><p>lt(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>1 if x &lt; y, 0 otherwise</p></td>
</tr>
<tr class="row-even"><td><p>gt(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>1 if x &gt; y, 0 otherwise</p></td>
</tr>
<tr class="row-odd"><td><p>slt(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>1 if x &lt; y, 0 otherwise, for signed numbers in two's complement</p></td>
</tr>
<tr class="row-even"><td><p>sgt(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>1 if x &gt; y, 0 otherwise, for signed numbers in two's complement</p></td>
</tr>
<tr class="row-odd"><td><p>eq(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>1 if x == y, 0 otherwise</p></td>
</tr>
<tr class="row-even"><td><p>iszero(x)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>1 if x == 0, 0 otherwise</p></td>
</tr>
<tr class="row-odd"><td><p>and(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>bitwise &quot;and&quot; of x and y</p></td>
</tr>
<tr class="row-even"><td><p>or(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>bitwise &quot;or&quot; of x and y</p></td>
</tr>
<tr class="row-odd"><td><p>xor(x, y)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>bitwise &quot;xor&quot; of x and y</p></td>
</tr>
<tr class="row-even"><td><p>byte(n, x)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>nth byte of x, where the most significant byte is the 0th byte</p></td>
</tr>
<tr class="row-odd"><td><p>shl(x, y)</p></td>
<td></td>
<td><p>C</p></td>
<td><p>logical shift left y by x bits</p></td>
</tr>
<tr class="row-even"><td><p>shr(x, y)</p></td>
<td></td>
<td><p>C</p></td>
<td><p>logical shift right y by x bits</p></td>
</tr>
<tr class="row-odd"><td><p>sar(x, y)</p></td>
<td></td>
<td><p>C</p></td>
<td><p>signed arithmetic shift right y by x bits</p></td>
</tr>
<tr class="row-even"><td><p>addmod(x, y, m)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>(x + y) % m with arbitrary precision arithmetic, 0 if m == 0</p></td>
</tr>
<tr class="row-odd"><td><p>mulmod(x, y, m)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>(x * y) % m with arbitrary precision arithmetic, 0 if m == 0</p></td>
</tr>
<tr class="row-even"><td><p>signextend(i, x)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>sign extend from (i*8+7)th bit counting from least significant</p></td>
</tr>
<tr class="row-odd"><td><p>keccak256(p, n)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>keccak(mem[p...(p+n)))</p></td>
</tr>
<tr class="row-even"><td><p>pc()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>current position in code</p></td>
</tr>
<tr class="row-odd"><td><p>pop(x)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>discard value x</p></td>
</tr>
<tr class="row-even"><td><p>mload(p)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>mem[p...(p+32))</p></td>
</tr>
<tr class="row-odd"><td><p>mstore(p, v)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>mem[p...(p+32)) := v</p></td>
</tr>
<tr class="row-even"><td><p>mstore8(p, v)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>mem[p] := v &amp; 0xff (only modifies a single byte)</p></td>
</tr>
<tr class="row-odd"><td><p>sload(p)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>storage[p]</p></td>
</tr>
<tr class="row-even"><td><p>sstore(p, v)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>storage[p] := v</p></td>
</tr>
<tr class="row-odd"><td><p>msize()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>size of memory, i.e. largest accessed memory index</p></td>
</tr>
<tr class="row-even"><td><p>gas()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>gas still available to execution</p></td>
</tr>
<tr class="row-odd"><td><p>address()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>address of the current contract / execution context</p></td>
</tr>
<tr class="row-even"><td><p>balance(a)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>wei balance at address a</p></td>
</tr>
<tr class="row-odd"><td><p>selfbalance()</p></td>
<td></td>
<td><p>I</p></td>
<td><p>equivalent to balance(address()), but cheaper</p></td>
</tr>
<tr class="row-even"><td><p>caller()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>call sender (excluding <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p>callvalue()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>wei sent together with the current call</p></td>
</tr>
<tr class="row-even"><td><p>calldataload(p)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>call data starting from position p (32 bytes)</p></td>
</tr>
<tr class="row-odd"><td><p>calldatasize()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>size of call data in bytes</p></td>
</tr>
<tr class="row-even"><td><p>calldatacopy(t, f, s)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>copy s bytes from calldata at position f to mem at position t</p></td>
</tr>
<tr class="row-odd"><td><p>codesize()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>size of the code of the current contract / execution context</p></td>
</tr>
<tr class="row-even"><td><p>codecopy(t, f, s)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>copy s bytes from code at position f to mem at position t</p></td>
</tr>
<tr class="row-odd"><td><p>extcodesize(a)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>size of the code at address a</p></td>
</tr>
<tr class="row-even"><td><p>extcodecopy(a, t, f, s)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>like codecopy(t, f, s) but take code at address a</p></td>
</tr>
<tr class="row-odd"><td><p>returndatasize()</p></td>
<td></td>
<td><p>B</p></td>
<td><p>size of the last returndata</p></td>
</tr>
<tr class="row-even"><td><p>returndatacopy(t, f, s)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>B</p></td>
<td><p>copy s bytes from returndata at position f to mem at position t</p></td>
</tr>
<tr class="row-odd"><td><p>extcodehash(a)</p></td>
<td></td>
<td><p>C</p></td>
<td><p>code hash of address a</p></td>
</tr>
<tr class="row-even"><td><p>create(v, p, n)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>create new contract with code mem[p...(p+n)) and send v wei
and return the new address; returns 0 on error</p></td>
</tr>
<tr class="row-odd"><td><p>create2(v, p, n, s)</p></td>
<td></td>
<td><p>C</p></td>
<td><p>create new contract with code mem[p...(p+n)) at address
keccak256(0xff . this . s . keccak256(mem[p...(p+n)))
and send v wei and return the new address, where <code class="docutils literal notranslate"><span class="pre">0xff</span></code> is a
1 byte value, <code class="docutils literal notranslate"><span class="pre">this</span></code> is the current contract's address
as a 20 byte value and <code class="docutils literal notranslate"><span class="pre">s</span></code> is a big-endian 256-bit value;
returns 0 on error</p></td>
</tr>
<tr class="row-even"><td><p>call(g, a, v, in,
insize, out, outsize)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>call contract at address a with input mem[in...(in+insize))
providing g gas and v wei and output area
mem[out...(out+outsize)) returning 0 on error (eg. out of gas)
and 1 on success
<a class="reference internal" href="#yul-call-return-area"><span class="std std-ref">See more</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>callcode(g, a, v, in,
insize, out, outsize)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>identical to <code class="docutils literal notranslate"><span class="pre">call</span></code> but only use the code from a and stay
in the context of the current contract otherwise
<a class="reference internal" href="#yul-call-return-area"><span class="std std-ref">See more</span></a></p></td>
</tr>
<tr class="row-even"><td><p>delegatecall(g, a, in,
insize, out, outsize)</p></td>
<td></td>
<td><p>H</p></td>
<td><p>identical to <code class="docutils literal notranslate"><span class="pre">callcode</span></code> but also keep <code class="docutils literal notranslate"><span class="pre">caller</span></code>
and <code class="docutils literal notranslate"><span class="pre">callvalue</span></code>
<a class="reference internal" href="#yul-call-return-area"><span class="std std-ref">See more</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>staticcall(g, a, in,
insize, out, outsize)</p></td>
<td></td>
<td><p>B</p></td>
<td><p>identical to <code class="docutils literal notranslate"><span class="pre">call(g,</span> <span class="pre">a,</span> <span class="pre">0,</span> <span class="pre">in,</span> <span class="pre">insize,</span> <span class="pre">out,</span> <span class="pre">outsize)</span></code> but do
not allow state modifications
<a class="reference internal" href="#yul-call-return-area"><span class="std std-ref">See more</span></a></p></td>
</tr>
<tr class="row-even"><td><p>return(p, s)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>end execution, return data mem[p...(p+s))</p></td>
</tr>
<tr class="row-odd"><td><p>revert(p, s)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>B</p></td>
<td><p>end execution, revert state changes, return data mem[p...(p+s))</p></td>
</tr>
<tr class="row-even"><td><p>selfdestruct(a)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>end execution, destroy current contract and send funds to a</p></td>
</tr>
<tr class="row-odd"><td><p>invalid()</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>end execution with invalid instruction</p></td>
</tr>
<tr class="row-even"><td><p>log0(p, s)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>log without topics and data mem[p...(p+s))</p></td>
</tr>
<tr class="row-odd"><td><p>log1(p, s, t1)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>log with topic t1 and data mem[p...(p+s))</p></td>
</tr>
<tr class="row-even"><td><p>log2(p, s, t1, t2)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>log with topics t1, t2 and data mem[p...(p+s))</p></td>
</tr>
<tr class="row-odd"><td><p>log3(p, s, t1, t2, t3)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>log with topics t1, t2, t3 and data mem[p...(p+s))</p></td>
</tr>
<tr class="row-even"><td><p>log4(p, s, t1, t2, t3,
t4)</p></td>
<td><p><cite>-</cite></p></td>
<td><p>F</p></td>
<td><p>log with topics t1, t2, t3, t4 and data mem[p...(p+s))</p></td>
</tr>
<tr class="row-odd"><td><p>chainid()</p></td>
<td></td>
<td><p>I</p></td>
<td><p>ID of the executing chain (EIP-1344)</p></td>
</tr>
<tr class="row-even"><td><p>basefee()</p></td>
<td></td>
<td><p>L</p></td>
<td><p>current block's base fee (EIP-3198 and EIP-1559)</p></td>
</tr>
<tr class="row-odd"><td><p>origin()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>transaction sender</p></td>
</tr>
<tr class="row-even"><td><p>gasprice()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>gas price of the transaction</p></td>
</tr>
<tr class="row-odd"><td><p>blockhash(b)</p></td>
<td></td>
<td><p>F</p></td>
<td><p>hash of block nr b - only for last 256 blocks excluding current</p></td>
</tr>
<tr class="row-even"><td><p>coinbase()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>current mining beneficiary</p></td>
</tr>
<tr class="row-odd"><td><p>timestamp()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>timestamp of the current block in seconds since the epoch</p></td>
</tr>
<tr class="row-even"><td><p>number()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>current block number</p></td>
</tr>
<tr class="row-odd"><td><p>difficulty()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>difficulty of the current block</p></td>
</tr>
<tr class="row-even"><td><p>gaslimit()</p></td>
<td></td>
<td><p>F</p></td>
<td><p>block gas limit of the current block</p></td>
</tr>
</tbody>
</table>
<div class="admonition note" id="yul-call-return-area">
<p class="admonition-title">توجه</p>
<p>The <code class="docutils literal notranslate"><span class="pre">call*</span></code> instructions use the <code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">outsize</span></code> parameters to define an area in memory where
the return or failure data is placed. This area is written to depending on how many bytes the called contract returns.
If it returns more data, only the first <code class="docutils literal notranslate"><span class="pre">outsize</span></code> bytes are written. You can access the rest of the data
using the <code class="docutils literal notranslate"><span class="pre">returndatacopy</span></code> opcode. If it returns less data, then the remaining bytes are not touched at all.
You need to use the <code class="docutils literal notranslate"><span class="pre">returndatasize</span></code> opcode to check which part of this memory area contains the return data.
The remaining bytes will retain their values as of before the call.</p>
</div>
<p>In some internal dialects, there are additional functions:</p>
<section id="datasize-dataoffset-datacopy">
<h4>datasize, dataoffset, datacopy<a class="headerlink" href="#datasize-dataoffset-datacopy" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>The functions <code class="docutils literal notranslate"><span class="pre">datasize(x)</span></code>, <code class="docutils literal notranslate"><span class="pre">dataoffset(x)</span></code> and <code class="docutils literal notranslate"><span class="pre">datacopy(t,</span> <span class="pre">f,</span> <span class="pre">l)</span></code>
are used to access other parts of a Yul object.</p>
<p><code class="docutils literal notranslate"><span class="pre">datasize</span></code> and <code class="docutils literal notranslate"><span class="pre">dataoffset</span></code> can only take string literals (the names of other objects)
as arguments and return the size and offset in the data area, respectively.
For the EVM, the <code class="docutils literal notranslate"><span class="pre">datacopy</span></code> function is equivalent to <code class="docutils literal notranslate"><span class="pre">codecopy</span></code>.</p>
</section>
<section id="setimmutable-loadimmutable">
<h4>setimmutable, loadimmutable<a class="headerlink" href="#setimmutable-loadimmutable" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>The functions <code class="docutils literal notranslate"><span class="pre">setimmutable(offset,</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">value)</span></code> and <code class="docutils literal notranslate"><span class="pre">loadimmutable(&quot;name&quot;)</span></code> are
used for the immutable mechanism in Solidity and do not nicely map to pure Yul.
The call to <code class="docutils literal notranslate"><span class="pre">setimmutable(offset,</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">value)</span></code> assumes that the runtime code of the contract
containing the given named immutable was copied to memory at offset <code class="docutils literal notranslate"><span class="pre">offset</span></code> and will write <code class="docutils literal notranslate"><span class="pre">value</span></code> to all
positions in memory (relative to <code class="docutils literal notranslate"><span class="pre">offset</span></code>) that contain the placeholder that was generated for calls
to <code class="docutils literal notranslate"><span class="pre">loadimmutable(&quot;name&quot;)</span></code> in the runtime code.</p>
</section>
<section id="linkersymbol">
<h4>linkersymbol<a class="headerlink" href="#linkersymbol" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>The function <code class="docutils literal notranslate"><span class="pre">linkersymbol(&quot;fq_library_name&quot;)</span></code> is a placeholder for an address literal to be
substituted by the linker. Its first and only argument must be a string literal and represents the
fully qualified library name used with the <code class="docutils literal notranslate"><span class="pre">--libraries</span></code> option.</p>
<p>For example this code</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=bGV0IGEgOj0gbGlua2Vyc3ltYm9sKCJmaWxlLnNvbDpNYXRoIik="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="ow">let</span> <span class="nv">a</span> <span class="o">:=</span> <span class="n">linkersymbol</span><span class="p">(</span><span class="s">&quot;file.sol:Math&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>is equivalent to</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=bGV0IGEgOj0gMHgxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkw"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="ow">let</span> <span class="nv">a</span> <span class="o">:=</span> <span class="mh">0x1234567890123456789012345678901234567890</span>
</pre></div>
</div>
<p>when the linker is invoked with <code class="docutils literal notranslate"><span class="pre">--libraries</span> <span class="pre">&quot;file.sol:Math=0x1234567890123456789012345678901234567890</span></code>
option.</p>
<p>See <a class="reference internal" href="using-the-compiler.html#commandline-compiler"><span class="std std-ref">Using the Commandline Compiler</span></a> for details about the Solidity linker.</p>
</section>
<section id="memoryguard">
<h4>memoryguard<a class="headerlink" href="#memoryguard" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>This function is available in the EVM dialect with objects. The caller of
<code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">ptr</span> <span class="pre">:=</span> <span class="pre">memoryguard(size)</span></code> (where <code class="docutils literal notranslate"><span class="pre">size</span></code> has to be a literal number)
promises that they only use memory in either the range <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">size)</span></code> or the
unbounded range starting at <code class="docutils literal notranslate"><span class="pre">ptr</span></code>.</p>
<p>Since the presence of a <code class="docutils literal notranslate"><span class="pre">memoryguard</span></code> call indicates that all memory access
adheres to this restriction, it allows the optimizer to perform additional
optimization steps, for example the stack limit evader, which attempts to move
stack variables that would otherwise be unreachable to memory.</p>
<p>The Yul optimizer promises to only use the memory range <code class="docutils literal notranslate"><span class="pre">[size,</span> <span class="pre">ptr)</span></code> for its purposes.
If the optimizer does not need to reserve any memory, it holds that <code class="docutils literal notranslate"><span class="pre">ptr</span> <span class="pre">==</span> <span class="pre">size</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">memoryguard</span></code> can be called multiple times, but needs to have the same literal as argument
within one Yul subobject. If at least one <code class="docutils literal notranslate"><span class="pre">memoryguard</span></code> call is found in a subobject,
the additional optimiser steps will be run on it.</p>
</section>
<section id="verbatim">
<span id="yul-verbatim"></span><h4>verbatim<a class="headerlink" href="#verbatim" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>The set of <code class="docutils literal notranslate"><span class="pre">verbatim...</span></code> builtin functions lets you create bytecode for opcodes
that are not known to the Yul compiler. It also allows you to create
bytecode sequences that will not be modified by the optimizer.</p>
<p>The functions are <code class="docutils literal notranslate"><span class="pre">verbatim_&lt;n&gt;i_&lt;m&gt;o(&quot;&lt;data&gt;&quot;,</span> <span class="pre">...)</span></code>, where</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code> is a decimal between 0 and 99 that specifies the number of input stack slots / variables</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m</span></code> is a decimal between 0 and 99 that specifies the number of output stack slots / variables</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> is a string literal that contains the sequence of bytes</p></li>
</ul>
<p>If you for example want to define a function that multiplies the input
by two, without the optimizer touching the constant two, you can use</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=bGV0IHggOj0gY2FsbGRhdGFsb2FkKDApCmxldCBkb3VibGUgOj0gdmVyYmF0aW1fMWlfMW8oaGV4IjYwMDIwMiIsIHgp"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="ow">let</span> <span class="nv">x</span> <span class="o">:=</span> <span class="nf">calldataload</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="ow">let</span> <span class="nv">double</span> <span class="o">:=</span> <span class="n">verbatim_1i_1o</span><span class="p">(</span><span class="s">hex&quot;600202&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will result in a <code class="docutils literal notranslate"><span class="pre">dup1</span></code> opcode to retrieve <code class="docutils literal notranslate"><span class="pre">x</span></code>
(the optimizer might directly re-use result of the
<code class="docutils literal notranslate"><span class="pre">calldataload</span></code> opcode, though)
directly followed by <code class="docutils literal notranslate"><span class="pre">600202</span></code>. The code is assumed to
consume the copied value of <code class="docutils literal notranslate"><span class="pre">x</span></code> and produce the result
on the top of the stack. The compiler then generates code
to allocate a stack slot for <code class="docutils literal notranslate"><span class="pre">double</span></code> and store the result there.</p>
<p>As with all opcodes, the arguments are arranged on the stack
with the leftmost argument on the top, while the return values
are assumed to be laid out such that the rightmost variable is
at the top of the stack.</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">verbatim</span></code> can be used to generate arbitrary opcodes
or even opcodes unknown to the Solidity compiler, care has to be taken
when using <code class="docutils literal notranslate"><span class="pre">verbatim</span></code> together with the optimizer. Even when the
optimizer is switched off, the code generator has to determine
the stack layout, which means that e.g. using <code class="docutils literal notranslate"><span class="pre">verbatim</span></code> to modify
the stack height can lead to undefined behaviour.</p>
<p>The following is a non-exhaustive list of restrictions on
verbatim bytecode that are not checked by
the compiler. Violations of these restrictions can result in
undefined behaviour.</p>
<ul class="simple">
<li><p>Control-flow should not jump into or out of verbatim blocks,
but it can jump within the same verbatim block.</p></li>
<li><p>Stack contents apart from the input and output parameters
should not be accessed.</p></li>
<li><p>The stack height difference should be exactly <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">-</span> <span class="pre">n</span></code>
(output slots minus input slots).</p></li>
<li><p>Verbatim bytecode cannot make any assumptions about the
surrounding bytecode. All required parameters have to be
passed in as stack variables.</p></li>
</ul>
<p>The optimizer does not analyze verbatim bytecode and always
assumes that it modifies all aspects of state and thus can only
do very few optimizations across <code class="docutils literal notranslate"><span class="pre">verbatim</span></code> function calls.</p>
<p>The optimizer treats verbatim bytecode as an opaque block of code.
It will not split it but might move, duplicate
or combine it with identical verbatim bytecode blocks.
If a verbatim bytecode block is unreachable by the control-flow,
it can be removed.</p>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>During discussions about whether or not EVM improvements
might break existing smart contracts, features inside <code class="docutils literal notranslate"><span class="pre">verbatim</span></code>
cannot receive the same consideration as those used by the Solidity
compiler itself.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>To avoid confusion, all identifiers starting with the string <code class="docutils literal notranslate"><span class="pre">verbatim</span></code> are reserved
and cannot be used for user-defined identifiers.</p>
</div>
</section>
</section>
</section>
<section id="specification-of-yul-object">
<span id="yul-object"></span><h2>Specification of Yul Object<a class="headerlink" href="#specification-of-yul-object" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>Yul objects are used to group named code and data sections.
The functions <code class="docutils literal notranslate"><span class="pre">datasize</span></code>, <code class="docutils literal notranslate"><span class="pre">dataoffset</span></code> and <code class="docutils literal notranslate"><span class="pre">datacopy</span></code>
can be used to access these sections from within code.
Hex strings can be used to specify data in hex encoding,
regular strings in native encoding. For code,
<code class="docutils literal notranslate"><span class="pre">datacopy</span></code> will access its assembled binary representation.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Object = &#39;object&#39; StringLiteral &#39;{&#39; Code ( Object | Data )* &#39;}&#39;
Code = &#39;code&#39; Block
Data = &#39;data&#39; StringLiteral ( HexLiteral | StringLiteral )
HexLiteral = &#39;hex&#39; (&#39;&quot;&#39; ([0-9a-fA-F]{2})* &#39;&quot;&#39; | &#39;\&#39;&#39; ([0-9a-fA-F]{2})* &#39;\&#39;&#39;)
StringLiteral = &#39;&quot;&#39; ([^&quot;\r\n\\] | &#39;\\&#39; .)* &#39;&quot;&#39;
</pre></div>
</div>
<p>Above, <code class="docutils literal notranslate"><span class="pre">Block</span></code> refers to <code class="docutils literal notranslate"><span class="pre">Block</span></code> in the Yul code grammar explained in the previous chapter.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>Data objects or sub-objects whose names contain a <code class="docutils literal notranslate"><span class="pre">.</span></code> can be defined
but it is not possible to access them through <code class="docutils literal notranslate"><span class="pre">datasize</span></code>,
<code class="docutils literal notranslate"><span class="pre">dataoffset</span></code> or <code class="docutils literal notranslate"><span class="pre">datacopy</span></code> because <code class="docutils literal notranslate"><span class="pre">.</span></code> is used as a separator
to access objects inside another object.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>The data object called <code class="docutils literal notranslate"><span class="pre">&quot;.metadata&quot;</span></code> has a special meaning:
It cannot be accessed from code and is always appended to the very end of the
bytecode, regardless of its position in the object.</p>
<p>Other data objects with special significance might be added in the
future, but their names will always start with a <code class="docutils literal notranslate"><span class="pre">.</span></code>.</p>
</div>
<p>An example Yul Object is shown below:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=Ly8gQSBjb250cmFjdCBjb25zaXN0cyBvZiBhIHNpbmdsZSBvYmplY3Qgd2l0aCBzdWItb2JqZWN0cyByZXByZXNlbnRpbmcKLy8gdGhlIGNvZGUgdG8gYmUgZGVwbG95ZWQgb3Igb3RoZXIgY29udHJhY3RzIGl0IGNhbiBjcmVhdGUuCi8vIFRoZSBzaW5nbGUgImNvZGUiIG5vZGUgaXMgdGhlIGV4ZWN1dGFibGUgY29kZSBvZiB0aGUgb2JqZWN0LgovLyBFdmVyeSAob3RoZXIpIG5hbWVkIG9iamVjdCBvciBkYXRhIHNlY3Rpb24gaXMgc2VyaWFsaXplZCBhbmQKLy8gbWFkZSBhY2Nlc3NpYmxlIHRvIHRoZSBzcGVjaWFsIGJ1aWx0LWluIGZ1bmN0aW9ucyBkYXRhY29weSAvIGRhdGFvZmZzZXQgLyBkYXRhc2l6ZQovLyBUaGUgY3VycmVudCBvYmplY3QsIHN1Yi1vYmplY3RzIGFuZCBkYXRhIGl0ZW1zIGluc2lkZSB0aGUgY3VycmVudCBvYmplY3QKLy8gYXJlIGluIHNjb3BlLgpvYmplY3QgIkNvbnRyYWN0MSIgewogICAgLy8gVGhpcyBpcyB0aGUgY29uc3RydWN0b3IgY29kZSBvZiB0aGUgY29udHJhY3QuCiAgICBjb2RlIHsKICAgICAgICBmdW5jdGlvbiBhbGxvY2F0ZShzaXplKSAtPiBwdHIgewogICAgICAgICAgICBwdHIgOj0gbWxvYWQoMHg0MCkKICAgICAgICAgICAgaWYgaXN6ZXJvKHB0cikgeyBwdHIgOj0gMHg2MCB9CiAgICAgICAgICAgIG1zdG9yZSgweDQwLCBhZGQocHRyLCBzaXplKSkKICAgICAgICB9CgogICAgICAgIC8vIGZpcnN0IGNyZWF0ZSAiQ29udHJhY3QyIgogICAgICAgIGxldCBzaXplIDo9IGRhdGFzaXplKCJDb250cmFjdDIiKQogICAgICAgIGxldCBvZmZzZXQgOj0gYWxsb2NhdGUoc2l6ZSkKICAgICAgICAvLyBUaGlzIHdpbGwgdHVybiBpbnRvIGNvZGVjb3B5IGZvciBFVk0KICAgICAgICBkYXRhY29weShvZmZzZXQsIGRhdGFvZmZzZXQoIkNvbnRyYWN0MiIpLCBzaXplKQogICAgICAgIC8vIGNvbnN0cnVjdG9yIHBhcmFtZXRlciBpcyBhIHNpbmdsZSBudW1iZXIgMHgxMjM0CiAgICAgICAgbXN0b3JlKGFkZChvZmZzZXQsIHNpemUpLCAweDEyMzQpCiAgICAgICAgcG9wKGNyZWF0ZShvZmZzZXQsIGFkZChzaXplLCAzMiksIDApKQoKICAgICAgICAvLyBub3cgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCAodGhlIGN1cnJlbnRseQogICAgICAgIC8vIGV4ZWN1dGluZyBjb2RlIGlzIHRoZSBjb25zdHJ1Y3RvciBjb2RlKQogICAgICAgIHNpemUgOj0gZGF0YXNpemUoInJ1bnRpbWUiKQogICAgICAgIG9mZnNldCA6PSBhbGxvY2F0ZShzaXplKQogICAgICAgIC8vIFRoaXMgd2lsbCB0dXJuIGludG8gYSBtZW1vcnktPm1lbW9yeSBjb3B5IGZvciBFd2FzbSBhbmQKICAgICAgICAvLyBhIGNvZGVjb3B5IGZvciBFVk0KICAgICAgICBkYXRhY29weShvZmZzZXQsIGRhdGFvZmZzZXQoInJ1bnRpbWUiKSwgc2l6ZSkKICAgICAgICByZXR1cm4ob2Zmc2V0LCBzaXplKQogICAgfQoKICAgIGRhdGEgIlRhYmxlMiIgaGV4IjQxMjMiCgogICAgb2JqZWN0ICJydW50aW1lIiB7CiAgICAgICAgY29kZSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGFsbG9jYXRlKHNpemUpIC0+IHB0ciB7CiAgICAgICAgICAgICAgICBwdHIgOj0gbWxvYWQoMHg0MCkKICAgICAgICAgICAgICAgIGlmIGlzemVybyhwdHIpIHsgcHRyIDo9IDB4NjAgfQogICAgICAgICAgICAgICAgbXN0b3JlKDB4NDAsIGFkZChwdHIsIHNpemUpKQogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBydW50aW1lIGNvZGUKCiAgICAgICAgICAgIG1zdG9yZSgwLCAiSGVsbG8sIFdvcmxkISIpCiAgICAgICAgICAgIHJldHVybigwLCAweDIwKQogICAgICAgIH0KICAgIH0KCiAgICAvLyBFbWJlZGRlZCBvYmplY3QuIFVzZSBjYXNlIGlzIHRoYXQgdGhlIG91dHNpZGUgaXMgYSBmYWN0b3J5IGNvbnRyYWN0LAogICAgLy8gYW5kIENvbnRyYWN0MiBpcyB0aGUgY29kZSB0byBiZSBjcmVhdGVkIGJ5IHRoZSBmYWN0b3J5CiAgICBvYmplY3QgIkNvbnRyYWN0MiIgewogICAgICAgIGNvZGUgewogICAgICAgICAgICAvLyBjb2RlIGhlcmUgLi4uCiAgICAgICAgfQoKICAgICAgICBvYmplY3QgInJ1bnRpbWUiIHsKICAgICAgICAgICAgY29kZSB7CiAgICAgICAgICAgICAgICAvLyBjb2RlIGhlcmUgLi4uCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGRhdGEgIlRhYmxlMSIgaGV4IjQxMjMiCiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="c1">// A contract consists of a single object with sub-objects representing</span>
<span class="c1">// the code to be deployed or other contracts it can create.</span>
<span class="c1">// The single &quot;code&quot; node is the executable code of the object.</span>
<span class="c1">// Every (other) named object or data section is serialized and</span>
<span class="c1">// made accessible to the special built-in functions datacopy / dataoffset / datasize</span>
<span class="c1">// The current object, sub-objects and data items inside the current object</span>
<span class="c1">// are in scope.</span>
<span class="k">object</span> <span class="s">&quot;Contract1&quot;</span> <span class="p">{</span>
    <span class="c1">// This is the constructor code of the contract.</span>
    <span class="k">code</span> <span class="p">{</span>
        <span class="k">function</span> <span class="n">allocate</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ptr</span> <span class="p">{</span>
            <span class="n">ptr</span> <span class="o">:=</span> <span class="nf">mload</span><span class="p">(</span><span class="mh">0x40</span><span class="p">)</span>
            <span class="k">if</span> <span class="nf">iszero</span><span class="p">(</span><span class="n">ptr</span><span class="p">)</span> <span class="p">{</span> <span class="n">ptr</span> <span class="o">:=</span> <span class="mh">0x60</span> <span class="p">}</span>
            <span class="nf">mstore</span><span class="p">(</span><span class="mh">0x40</span><span class="p">,</span> <span class="nf">add</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span> <span class="n">size</span><span class="p">))</span>
        <span class="p">}</span>

        <span class="c1">// first create &quot;Contract2&quot;</span>
        <span class="ow">let</span> <span class="nv">size</span> <span class="o">:=</span> <span class="k k-Function">datasize</span><span class="p">(</span><span class="s">&quot;Contract2&quot;</span><span class="p">)</span>
        <span class="ow">let</span> <span class="nv">offset</span> <span class="o">:=</span> <span class="n">allocate</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
        <span class="c1">// This will turn into codecopy for EVM</span>
        <span class="k k-Function">datacopy</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="k k-Function">dataoffset</span><span class="p">(</span><span class="s">&quot;Contract2&quot;</span><span class="p">),</span> <span class="n">size</span><span class="p">)</span>
        <span class="c1">// constructor parameter is a single number 0x1234</span>
        <span class="nf">mstore</span><span class="p">(</span><span class="nf">add</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">size</span><span class="p">),</span> <span class="mh">0x1234</span><span class="p">)</span>
        <span class="nf">pop</span><span class="p">(</span><span class="nf">create</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="nf">add</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="mi">32</span><span class="p">),</span> <span class="mi">0</span><span class="p">))</span>

        <span class="c1">// now return the runtime object (the currently</span>
        <span class="c1">// executing code is the constructor code)</span>
        <span class="n">size</span> <span class="o">:=</span> <span class="k k-Function">datasize</span><span class="p">(</span><span class="s">&quot;runtime&quot;</span><span class="p">)</span>
        <span class="n">offset</span> <span class="o">:=</span> <span class="n">allocate</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
        <span class="c1">// This will turn into a memory-&gt;memory copy for Ewasm and</span>
        <span class="c1">// a codecopy for EVM</span>
        <span class="k k-Function">datacopy</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="k k-Function">dataoffset</span><span class="p">(</span><span class="s">&quot;runtime&quot;</span><span class="p">),</span> <span class="n">size</span><span class="p">)</span>
        <span class="nf">return</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">data</span> <span class="s">&quot;Table2&quot;</span> <span class="s">hex&quot;4123&quot;</span>

    <span class="k">object</span> <span class="s">&quot;runtime&quot;</span> <span class="p">{</span>
        <span class="k">code</span> <span class="p">{</span>
            <span class="k">function</span> <span class="n">allocate</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ptr</span> <span class="p">{</span>
                <span class="n">ptr</span> <span class="o">:=</span> <span class="nf">mload</span><span class="p">(</span><span class="mh">0x40</span><span class="p">)</span>
                <span class="k">if</span> <span class="nf">iszero</span><span class="p">(</span><span class="n">ptr</span><span class="p">)</span> <span class="p">{</span> <span class="n">ptr</span> <span class="o">:=</span> <span class="mh">0x60</span> <span class="p">}</span>
                <span class="nf">mstore</span><span class="p">(</span><span class="mh">0x40</span><span class="p">,</span> <span class="nf">add</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span> <span class="n">size</span><span class="p">))</span>
            <span class="p">}</span>

            <span class="c1">// runtime code</span>

            <span class="nf">mstore</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s">&quot;Hello, World!&quot;</span><span class="p">)</span>
            <span class="nf">return</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Embedded object. Use case is that the outside is a factory contract,</span>
    <span class="c1">// and Contract2 is the code to be created by the factory</span>
    <span class="k">object</span> <span class="s">&quot;Contract2&quot;</span> <span class="p">{</span>
        <span class="k">code</span> <span class="p">{</span>
            <span class="c1">// code here ...</span>
        <span class="p">}</span>

        <span class="k">object</span> <span class="s">&quot;runtime&quot;</span> <span class="p">{</span>
            <span class="k">code</span> <span class="p">{</span>
                <span class="c1">// code here ...</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">data</span> <span class="s">&quot;Table1&quot;</span> <span class="s">hex&quot;4123&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="yul-optimizer">
<h2>Yul Optimizer<a class="headerlink" href="#yul-optimizer" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>The Yul optimizer operates on Yul code and uses the same language for input, output and
intermediate states. This allows for easy debugging and verification of the optimizer.</p>
<p>Please refer to the general <a class="reference internal" href="internals/optimizer.html#optimizer"><span class="std std-ref">optimizer documentation</span></a>
for more details about the different optimization stages and how to use the optimizer.</p>
<p>If you want to use Solidity in stand-alone Yul mode, you activate the optimizer using <code class="docutils literal notranslate"><span class="pre">--optimize</span></code>
and optionally specify the <a class="reference internal" href="internals/optimizer.html#optimizer-parameter-runs"><span class="std std-ref">expected number of contract executions</span></a> with
<code class="docutils literal notranslate"><span class="pre">--optimize-runs</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>solc --strict-assembly --optimize --optimize-runs <span class="m">200</span>
</pre></div>
</div>
<p>In Solidity mode, the Yul optimizer is activated together with the regular optimizer.</p>
<section id="optimization-step-sequence">
<h3>Optimization Step Sequence<a class="headerlink" href="#optimization-step-sequence" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>By default the Yul optimizer applies its predefined sequence of optimization steps to the generated assembly.
You can override this sequence and supply your own using the <code class="docutils literal notranslate"><span class="pre">--yul-optimizations</span></code> option:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>solc --optimize --ir-optimized --yul-optimizations <span class="s1">&#39;dhfoD[xarrscLMcCTU]uljmul&#39;</span>
</pre></div>
</div>
<p>The order of steps is significant and affects the quality of the output.
Moreover, applying a step may uncover new optimization opportunities for others that were already
applied so repeating steps is often beneficial.
By enclosing part of the sequence in square brackets (<code class="docutils literal notranslate"><span class="pre">[]</span></code>) you tell the optimizer to repeatedly
apply that part until it no longer improves the size of the resulting assembly.
You can use brackets multiple times in a single sequence but they cannot be nested.</p>
<p>The following optimization steps are available:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Abbreviation</p></th>
<th class="head"><p>Full name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">f</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BlockFlattener</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">l</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CircularReferencesPruner</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">c</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CommonSubexpressionEliminator</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">C</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ConditionalSimplifier</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">U</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ConditionalUnsimplifier</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ControlFlowSimplifier</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">D</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DeadCodeEliminator</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">v</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">EquivalentFunctionCombiner</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">e</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ExpressionInliner</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">j</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ExpressionJoiner</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ExpressionSimplifier</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ExpressionSplitter</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">I</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ForLoopConditionIntoBody</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">O</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ForLoopConditionOutOfBody</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">o</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ForLoopInitRewriter</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FullInliner</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">g</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FunctionGrouper</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">h</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FunctionHoister</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">F</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FunctionSpecializer</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">T</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LiteralRematerialiser</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">L</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LoadResolver</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">M</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">LoopInvariantCodeMotion</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RedundantAssignEliminator</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">R</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ReasoningBasedSimplifier</span></code> - highly experimental</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">m</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Rematerialiser</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">V</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSAReverser</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">a</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SSATransform</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">t</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">StructuralSimplifier</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">u</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UnusedPruner</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">p</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">UnusedFunctionParameterPruner</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VarDeclInitializer</span></code></p></td>
</tr>
</tbody>
</table>
<p>Some steps depend on properties ensured by <code class="docutils literal notranslate"><span class="pre">BlockFlattener</span></code>, <code class="docutils literal notranslate"><span class="pre">FunctionGrouper</span></code>, <code class="docutils literal notranslate"><span class="pre">ForLoopInitRewriter</span></code>.
For this reason the Yul optimizer always applies them before applying any steps supplied by the user.</p>
<p>The ReasoningBasedSimplifier is an optimizer step that is currently not enabled
in the default set of steps. It uses an SMT solver to simplify arithmetic expressions
and boolean conditions. It has not received thorough testing or validation yet and can produce
non-reproducible results, so please use with care!</p>
</section>
</section>
<section id="complete-erc20-example">
<span id="erc20yul"></span><h2>Complete ERC20 Example<a class="headerlink" href="#complete-erc20-example" title="پیوند ثابت به این سر مقاله"></a></h2>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=yul&amp;version=0.8.4&amp;code=b2JqZWN0ICJUb2tlbiIgewogICAgY29kZSB7CiAgICAgICAgLy8gU3RvcmUgdGhlIGNyZWF0b3IgaW4gc2xvdCB6ZXJvLgogICAgICAgIHNzdG9yZSgwLCBjYWxsZXIoKSkKCiAgICAgICAgLy8gRGVwbG95IHRoZSBjb250cmFjdAogICAgICAgIGRhdGFjb3B5KDAsIGRhdGFvZmZzZXQoInJ1bnRpbWUiKSwgZGF0YXNpemUoInJ1bnRpbWUiKSkKICAgICAgICByZXR1cm4oMCwgZGF0YXNpemUoInJ1bnRpbWUiKSkKICAgIH0KICAgIG9iamVjdCAicnVudGltZSIgewogICAgICAgIGNvZGUgewogICAgICAgICAgICAvLyBQcm90ZWN0aW9uIGFnYWluc3Qgc2VuZGluZyBFdGhlcgogICAgICAgICAgICByZXF1aXJlKGlzemVybyhjYWxsdmFsdWUoKSkpCgogICAgICAgICAgICAvLyBEaXNwYXRjaGVyCiAgICAgICAgICAgIHN3aXRjaCBzZWxlY3RvcigpCiAgICAgICAgICAgIGNhc2UgMHg3MGEwODIzMSAvKiAiYmFsYW5jZU9mKGFkZHJlc3MpIiAqLyB7CiAgICAgICAgICAgICAgICByZXR1cm5VaW50KGJhbGFuY2VPZihkZWNvZGVBc0FkZHJlc3MoMCkpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMHgxODE2MGRkZCAvKiAidG90YWxTdXBwbHkoKSIgKi8gewogICAgICAgICAgICAgICAgcmV0dXJuVWludCh0b3RhbFN1cHBseSgpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMHhhOTA1OWNiYiAvKiAidHJhbnNmZXIoYWRkcmVzcyx1aW50MjU2KSIgKi8gewogICAgICAgICAgICAgICAgdHJhbnNmZXIoZGVjb2RlQXNBZGRyZXNzKDApLCBkZWNvZGVBc1VpbnQoMSkpCiAgICAgICAgICAgICAgICByZXR1cm5UcnVlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDB4MjNiODcyZGQgLyogInRyYW5zZmVyRnJvbShhZGRyZXNzLGFkZHJlc3MsdWludDI1NikiICovIHsKICAgICAgICAgICAgICAgIHRyYW5zZmVyRnJvbShkZWNvZGVBc0FkZHJlc3MoMCksIGRlY29kZUFzQWRkcmVzcygxKSwgZGVjb2RlQXNVaW50KDIpKQogICAgICAgICAgICAgICAgcmV0dXJuVHJ1ZSgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAweDA5NWVhN2IzIC8qICJhcHByb3ZlKGFkZHJlc3MsdWludDI1NikiICovIHsKICAgICAgICAgICAgICAgIGFwcHJvdmUoZGVjb2RlQXNBZGRyZXNzKDApLCBkZWNvZGVBc1VpbnQoMSkpCiAgICAgICAgICAgICAgICByZXR1cm5UcnVlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDB4ZGQ2MmVkM2UgLyogImFsbG93YW5jZShhZGRyZXNzLGFkZHJlc3MpIiAqLyB7CiAgICAgICAgICAgICAgICByZXR1cm5VaW50KGFsbG93YW5jZShkZWNvZGVBc0FkZHJlc3MoMCksIGRlY29kZUFzQWRkcmVzcygxKSkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAweDQwYzEwZjE5IC8qICJtaW50KGFkZHJlc3MsdWludDI1NikiICovIHsKICAgICAgICAgICAgICAgIG1pbnQoZGVjb2RlQXNBZGRyZXNzKDApLCBkZWNvZGVBc1VpbnQoMSkpCiAgICAgICAgICAgICAgICByZXR1cm5UcnVlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWZhdWx0IHsKICAgICAgICAgICAgICAgIHJldmVydCgwLCAwKQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBtaW50KGFjY291bnQsIGFtb3VudCkgewogICAgICAgICAgICAgICAgcmVxdWlyZShjYWxsZWRCeU93bmVyKCkpCgogICAgICAgICAgICAgICAgbWludFRva2VucyhhbW91bnQpCiAgICAgICAgICAgICAgICBhZGRUb0JhbGFuY2UoYWNjb3VudCwgYW1vdW50KQogICAgICAgICAgICAgICAgZW1pdFRyYW5zZmVyKDAsIGFjY291bnQsIGFtb3VudCkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zlcih0bywgYW1vdW50KSB7CiAgICAgICAgICAgICAgICBleGVjdXRlVHJhbnNmZXIoY2FsbGVyKCksIHRvLCBhbW91bnQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gYXBwcm92ZShzcGVuZGVyLCBhbW91bnQpIHsKICAgICAgICAgICAgICAgIHJldmVydElmWmVyb0FkZHJlc3Moc3BlbmRlcikKICAgICAgICAgICAgICAgIHNldEFsbG93YW5jZShjYWxsZXIoKSwgc3BlbmRlciwgYW1vdW50KQogICAgICAgICAgICAgICAgZW1pdEFwcHJvdmFsKGNhbGxlcigpLCBzcGVuZGVyLCBhbW91bnQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGZyb20sIHRvLCBhbW91bnQpIHsKICAgICAgICAgICAgICAgIGRlY3JlYXNlQWxsb3dhbmNlQnkoZnJvbSwgY2FsbGVyKCksIGFtb3VudCkKICAgICAgICAgICAgICAgIGV4ZWN1dGVUcmFuc2Zlcihmcm9tLCB0bywgYW1vdW50KQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBleGVjdXRlVHJhbnNmZXIoZnJvbSwgdG8sIGFtb3VudCkgewogICAgICAgICAgICAgICAgcmV2ZXJ0SWZaZXJvQWRkcmVzcyh0bykKICAgICAgICAgICAgICAgIGRlZHVjdEZyb21CYWxhbmNlKGZyb20sIGFtb3VudCkKICAgICAgICAgICAgICAgIGFkZFRvQmFsYW5jZSh0bywgYW1vdW50KQogICAgICAgICAgICAgICAgZW1pdFRyYW5zZmVyKGZyb20sIHRvLCBhbW91bnQpCiAgICAgICAgICAgIH0KCgogICAgICAgICAgICAvKiAtLS0tLS0tLS0tIGNhbGxkYXRhIGRlY29kaW5nIGZ1bmN0aW9ucyAtLS0tLS0tLS0tLSAqLwogICAgICAgICAgICBmdW5jdGlvbiBzZWxlY3RvcigpIC0+IHMgewogICAgICAgICAgICAgICAgcyA6PSBkaXYoY2FsbGRhdGFsb2FkKDApLCAweDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZGVjb2RlQXNBZGRyZXNzKG9mZnNldCkgLT4gdiB7CiAgICAgICAgICAgICAgICB2IDo9IGRlY29kZUFzVWludChvZmZzZXQpCiAgICAgICAgICAgICAgICBpZiBpc3plcm8oaXN6ZXJvKGFuZCh2LCBub3QoMHhmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmKSkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0KDAsIDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gZGVjb2RlQXNVaW50KG9mZnNldCkgLT4gdiB7CiAgICAgICAgICAgICAgICBsZXQgcG9zIDo9IGFkZCg0LCBtdWwob2Zmc2V0LCAweDIwKSkKICAgICAgICAgICAgICAgIGlmIGx0KGNhbGxkYXRhc2l6ZSgpLCBhZGQocG9zLCAweDIwKSkgewogICAgICAgICAgICAgICAgICAgIHJldmVydCgwLCAwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdiA6PSBjYWxsZGF0YWxvYWQocG9zKQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qIC0tLS0tLS0tLS0gY2FsbGRhdGEgZW5jb2RpbmcgZnVuY3Rpb25zIC0tLS0tLS0tLS0gKi8KICAgICAgICAgICAgZnVuY3Rpb24gcmV0dXJuVWludCh2KSB7CiAgICAgICAgICAgICAgICBtc3RvcmUoMCwgdikKICAgICAgICAgICAgICAgIHJldHVybigwLCAweDIwKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHJldHVyblRydWUoKSB7CiAgICAgICAgICAgICAgICByZXR1cm5VaW50KDEpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIC0tLS0tLS0tIGV2ZW50cyAtLS0tLS0tLS0tICovCiAgICAgICAgICAgIGZ1bmN0aW9uIGVtaXRUcmFuc2Zlcihmcm9tLCB0bywgYW1vdW50KSB7CiAgICAgICAgICAgICAgICBsZXQgc2lnbmF0dXJlSGFzaCA6PSAweGRkZjI1MmFkMWJlMmM4OWI2OWMyYjA2OGZjMzc4ZGFhOTUyYmE3ZjE2M2M0YTExNjI4ZjU1YTRkZjUyM2IzZWYKICAgICAgICAgICAgICAgIGVtaXRFdmVudChzaWduYXR1cmVIYXNoLCBmcm9tLCB0bywgYW1vdW50KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGVtaXRBcHByb3ZhbChmcm9tLCBzcGVuZGVyLCBhbW91bnQpIHsKICAgICAgICAgICAgICAgIGxldCBzaWduYXR1cmVIYXNoIDo9IDB4OGM1YmUxZTVlYmVjN2Q1YmQxNGY3MTQyN2QxZTg0ZjNkZDAzMTRjMGY3YjIyOTFlNWIyMDBhYzhjN2MzYjkyNQogICAgICAgICAgICAgICAgZW1pdEV2ZW50KHNpZ25hdHVyZUhhc2gsIGZyb20sIHNwZW5kZXIsIGFtb3VudCkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBlbWl0RXZlbnQoc2lnbmF0dXJlSGFzaCwgaW5kZXhlZDEsIGluZGV4ZWQyLCBub25JbmRleGVkKSB7CiAgICAgICAgICAgICAgICBtc3RvcmUoMCwgbm9uSW5kZXhlZCkKICAgICAgICAgICAgICAgIGxvZzMoMCwgMHgyMCwgc2lnbmF0dXJlSGFzaCwgaW5kZXhlZDEsIGluZGV4ZWQyKQogICAgICAgICAgICB9CgogICAgICAgICAgICAvKiAtLS0tLS0tLSBzdG9yYWdlIGxheW91dCAtLS0tLS0tLS0tICovCiAgICAgICAgICAgIGZ1bmN0aW9uIG93bmVyUG9zKCkgLT4gcCB7IHAgOj0gMCB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHRvdGFsU3VwcGx5UG9zKCkgLT4gcCB7IHAgOj0gMSB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFjY291bnRUb1N0b3JhZ2VPZmZzZXQoYWNjb3VudCkgLT4gb2Zmc2V0IHsKICAgICAgICAgICAgICAgIG9mZnNldCA6PSBhZGQoMHgxMDAwLCBhY2NvdW50KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFsbG93YW5jZVN0b3JhZ2VPZmZzZXQoYWNjb3VudCwgc3BlbmRlcikgLT4gb2Zmc2V0IHsKICAgICAgICAgICAgICAgIG9mZnNldCA6PSBhY2NvdW50VG9TdG9yYWdlT2Zmc2V0KGFjY291bnQpCiAgICAgICAgICAgICAgICBtc3RvcmUoMCwgb2Zmc2V0KQogICAgICAgICAgICAgICAgbXN0b3JlKDB4MjAsIHNwZW5kZXIpCiAgICAgICAgICAgICAgICBvZmZzZXQgOj0ga2VjY2FrMjU2KDAsIDB4NDApCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIC0tLS0tLS0tIHN0b3JhZ2UgYWNjZXNzIC0tLS0tLS0tLS0gKi8KICAgICAgICAgICAgZnVuY3Rpb24gb3duZXIoKSAtPiBvIHsKICAgICAgICAgICAgICAgIG8gOj0gc2xvYWQob3duZXJQb3MoKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB0b3RhbFN1cHBseSgpIC0+IHN1cHBseSB7CiAgICAgICAgICAgICAgICBzdXBwbHkgOj0gc2xvYWQodG90YWxTdXBwbHlQb3MoKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBtaW50VG9rZW5zKGFtb3VudCkgewogICAgICAgICAgICAgICAgc3N0b3JlKHRvdGFsU3VwcGx5UG9zKCksIHNhZmVBZGQodG90YWxTdXBwbHkoKSwgYW1vdW50KSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWNjb3VudCkgLT4gYmFsIHsKICAgICAgICAgICAgICAgIGJhbCA6PSBzbG9hZChhY2NvdW50VG9TdG9yYWdlT2Zmc2V0KGFjY291bnQpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZFRvQmFsYW5jZShhY2NvdW50LCBhbW91bnQpIHsKICAgICAgICAgICAgICAgIGxldCBvZmZzZXQgOj0gYWNjb3VudFRvU3RvcmFnZU9mZnNldChhY2NvdW50KQogICAgICAgICAgICAgICAgc3N0b3JlKG9mZnNldCwgc2FmZUFkZChzbG9hZChvZmZzZXQpLCBhbW91bnQpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGRlZHVjdEZyb21CYWxhbmNlKGFjY291bnQsIGFtb3VudCkgewogICAgICAgICAgICAgICAgbGV0IG9mZnNldCA6PSBhY2NvdW50VG9TdG9yYWdlT2Zmc2V0KGFjY291bnQpCiAgICAgICAgICAgICAgICBsZXQgYmFsIDo9IHNsb2FkKG9mZnNldCkKICAgICAgICAgICAgICAgIHJlcXVpcmUobHRlKGFtb3VudCwgYmFsKSkKICAgICAgICAgICAgICAgIHNzdG9yZShvZmZzZXQsIHN1YihiYWwsIGFtb3VudCkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFjY291bnQsIHNwZW5kZXIpIC0+IGFtb3VudCB7CiAgICAgICAgICAgICAgICBhbW91bnQgOj0gc2xvYWQoYWxsb3dhbmNlU3RvcmFnZU9mZnNldChhY2NvdW50LCBzcGVuZGVyKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzZXRBbGxvd2FuY2UoYWNjb3VudCwgc3BlbmRlciwgYW1vdW50KSB7CiAgICAgICAgICAgICAgICBzc3RvcmUoYWxsb3dhbmNlU3RvcmFnZU9mZnNldChhY2NvdW50LCBzcGVuZGVyKSwgYW1vdW50KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGRlY3JlYXNlQWxsb3dhbmNlQnkoYWNjb3VudCwgc3BlbmRlciwgYW1vdW50KSB7CiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0IDo9IGFsbG93YW5jZVN0b3JhZ2VPZmZzZXQoYWNjb3VudCwgc3BlbmRlcikKICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QWxsb3dhbmNlIDo9IHNsb2FkKG9mZnNldCkKICAgICAgICAgICAgICAgIHJlcXVpcmUobHRlKGFtb3VudCwgY3VycmVudEFsbG93YW5jZSkpCiAgICAgICAgICAgICAgICBzc3RvcmUob2Zmc2V0LCBzdWIoY3VycmVudEFsbG93YW5jZSwgYW1vdW50KSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyogLS0tLS0tLS0tLSB1dGlsaXR5IGZ1bmN0aW9ucyAtLS0tLS0tLS0tICovCiAgICAgICAgICAgIGZ1bmN0aW9uIGx0ZShhLCBiKSAtPiByIHsKICAgICAgICAgICAgICAgIHIgOj0gaXN6ZXJvKGd0KGEsIGIpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGd0ZShhLCBiKSAtPiByIHsKICAgICAgICAgICAgICAgIHIgOj0gaXN6ZXJvKGx0KGEsIGIpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNhZmVBZGQoYSwgYikgLT4gciB7CiAgICAgICAgICAgICAgICByIDo9IGFkZChhLCBiKQogICAgICAgICAgICAgICAgaWYgb3IobHQociwgYSksIGx0KHIsIGIpKSB7IHJldmVydCgwLCAwKSB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGVkQnlPd25lcigpIC0+IGNibyB7CiAgICAgICAgICAgICAgICBjYm8gOj0gZXEob3duZXIoKSwgY2FsbGVyKCkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmV2ZXJ0SWZaZXJvQWRkcmVzcyhhZGRyKSB7CiAgICAgICAgICAgICAgICByZXF1aXJlKGFkZHIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmVxdWlyZShjb25kaXRpb24pIHsKICAgICAgICAgICAgICAgIGlmIGlzemVybyhjb25kaXRpb24pIHsgcmV2ZXJ0KDAsIDApIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-yul notranslate"><div class="highlight"><pre><span></span><span class="k">object</span> <span class="s">&quot;Token&quot;</span> <span class="p">{</span>
    <span class="k">code</span> <span class="p">{</span>
        <span class="c1">// Store the creator in slot zero.</span>
        <span class="nf">sstore</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nf">caller</span><span class="p">())</span>

        <span class="c1">// Deploy the contract</span>
        <span class="k k-Function">datacopy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k k-Function">dataoffset</span><span class="p">(</span><span class="s">&quot;runtime&quot;</span><span class="p">),</span> <span class="k k-Function">datasize</span><span class="p">(</span><span class="s">&quot;runtime&quot;</span><span class="p">))</span>
        <span class="nf">return</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k k-Function">datasize</span><span class="p">(</span><span class="s">&quot;runtime&quot;</span><span class="p">))</span>
    <span class="p">}</span>
    <span class="k">object</span> <span class="s">&quot;runtime&quot;</span> <span class="p">{</span>
        <span class="k">code</span> <span class="p">{</span>
            <span class="c1">// Protection against sending Ether</span>
            <span class="n">require</span><span class="p">(</span><span class="nf">iszero</span><span class="p">(</span><span class="nf">callvalue</span><span class="p">()))</span>

            <span class="c1">// Dispatcher</span>
            <span class="k">switch</span> <span class="n">selector</span><span class="p">()</span>
            <span class="k">case</span> <span class="mh">0x70a08231</span> <span class="cm">/* &quot;balanceOf(address)&quot; */</span> <span class="p">{</span>
                <span class="n">returnUint</span><span class="p">(</span><span class="n">balanceOf</span><span class="p">(</span><span class="n">decodeAsAddress</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="mh">0x18160ddd</span> <span class="cm">/* &quot;totalSupply()&quot; */</span> <span class="p">{</span>
                <span class="n">returnUint</span><span class="p">(</span><span class="n">totalSupply</span><span class="p">())</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="mh">0xa9059cbb</span> <span class="cm">/* &quot;transfer(address,uint256)&quot; */</span> <span class="p">{</span>
                <span class="n">transfer</span><span class="p">(</span><span class="n">decodeAsAddress</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">decodeAsUint</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">returnTrue</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="mh">0x23b872dd</span> <span class="cm">/* &quot;transferFrom(address,address,uint256)&quot; */</span> <span class="p">{</span>
                <span class="n">transferFrom</span><span class="p">(</span><span class="n">decodeAsAddress</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">decodeAsAddress</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">decodeAsUint</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
                <span class="n">returnTrue</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="mh">0x095ea7b3</span> <span class="cm">/* &quot;approve(address,uint256)&quot; */</span> <span class="p">{</span>
                <span class="n">approve</span><span class="p">(</span><span class="n">decodeAsAddress</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">decodeAsUint</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">returnTrue</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="mh">0xdd62ed3e</span> <span class="cm">/* &quot;allowance(address,address)&quot; */</span> <span class="p">{</span>
                <span class="n">returnUint</span><span class="p">(</span><span class="n">allowance</span><span class="p">(</span><span class="n">decodeAsAddress</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">decodeAsAddress</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
            <span class="p">}</span>
            <span class="k">case</span> <span class="mh">0x40c10f19</span> <span class="cm">/* &quot;mint(address,uint256)&quot; */</span> <span class="p">{</span>
                <span class="n">mint</span><span class="p">(</span><span class="n">decodeAsAddress</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">decodeAsUint</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
                <span class="n">returnTrue</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="k">default</span> <span class="p">{</span>
                <span class="nf">revert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="k">function</span> <span class="n">mint</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">require</span><span class="p">(</span><span class="n">calledByOwner</span><span class="p">())</span>

                <span class="n">mintTokens</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
                <span class="n">addToBalance</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
                <span class="n">emitTransfer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">transfer</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">executeTransfer</span><span class="p">(</span><span class="nf">caller</span><span class="p">(),</span> <span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">approve</span><span class="p">(</span><span class="n">spender</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">revertIfZeroAddress</span><span class="p">(</span><span class="n">spender</span><span class="p">)</span>
                <span class="n">setAllowance</span><span class="p">(</span><span class="nf">caller</span><span class="p">(),</span> <span class="n">spender</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
                <span class="n">emitApproval</span><span class="p">(</span><span class="nf">caller</span><span class="p">(),</span> <span class="n">spender</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">transferFrom</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">decreaseAllowanceBy</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="nf">caller</span><span class="p">(),</span> <span class="n">amount</span><span class="p">)</span>
                <span class="n">executeTransfer</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="k">function</span> <span class="n">executeTransfer</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">revertIfZeroAddress</span><span class="p">(</span><span class="n">to</span><span class="p">)</span>
                <span class="n">deductFromBalance</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
                <span class="n">addToBalance</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
                <span class="n">emitTransfer</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
            <span class="p">}</span>


            <span class="cm">/* ---------- calldata decoding functions ----------- */</span>
            <span class="k">function</span> <span class="n">selector</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">s</span> <span class="p">{</span>
                <span class="n">s</span> <span class="o">:=</span> <span class="nf">div</span><span class="p">(</span><span class="nf">calldataload</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mh">0x100000000000000000000000000000000000000000000000000000000</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="k">function</span> <span class="n">decodeAsAddress</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="p">{</span>
                <span class="n">v</span> <span class="o">:=</span> <span class="n">decodeAsUint</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="k">if</span> <span class="nf">iszero</span><span class="p">(</span><span class="nf">iszero</span><span class="p">(</span><span class="nf">and</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nf">not</span><span class="p">(</span><span class="mh">0xffffffffffffffffffffffffffffffffffffffff</span><span class="p">))))</span> <span class="p">{</span>
                    <span class="nf">revert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">decodeAsUint</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">v</span> <span class="p">{</span>
                <span class="ow">let</span> <span class="nv">pos</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="nf">mul</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">))</span>
                <span class="k">if</span> <span class="nf">lt</span><span class="p">(</span><span class="nf">calldatasize</span><span class="p">(),</span> <span class="nf">add</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">))</span> <span class="p">{</span>
                    <span class="nf">revert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="n">v</span> <span class="o">:=</span> <span class="nf">calldataload</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="cm">/* ---------- calldata encoding functions ---------- */</span>
            <span class="k">function</span> <span class="n">returnUint</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">{</span>
                <span class="nf">mstore</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                <span class="nf">return</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">returnTrue</span><span class="p">()</span> <span class="p">{</span>
                <span class="n">returnUint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="cm">/* -------- events ---------- */</span>
            <span class="k">function</span> <span class="n">emitTransfer</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="ow">let</span> <span class="nv">signatureHash</span> <span class="o">:=</span> <span class="mh">0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef</span>
                <span class="n">emitEvent</span><span class="p">(</span><span class="n">signatureHash</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">emitApproval</span><span class="p">(</span><span class="n">from</span><span class="p">,</span> <span class="n">spender</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="ow">let</span> <span class="nv">signatureHash</span> <span class="o">:=</span> <span class="mh">0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925</span>
                <span class="n">emitEvent</span><span class="p">(</span><span class="n">signatureHash</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">spender</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">emitEvent</span><span class="p">(</span><span class="n">signatureHash</span><span class="p">,</span> <span class="n">indexed1</span><span class="p">,</span> <span class="n">indexed2</span><span class="p">,</span> <span class="n">nonIndexed</span><span class="p">)</span> <span class="p">{</span>
                <span class="nf">mstore</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">nonIndexed</span><span class="p">)</span>
                <span class="nf">log3</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mh">0x20</span><span class="p">,</span> <span class="n">signatureHash</span><span class="p">,</span> <span class="n">indexed1</span><span class="p">,</span> <span class="n">indexed2</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="cm">/* -------- storage layout ---------- */</span>
            <span class="k">function</span> <span class="n">ownerPos</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">p</span> <span class="p">{</span> <span class="n">p</span> <span class="o">:=</span> <span class="mi">0</span> <span class="p">}</span>
            <span class="k">function</span> <span class="n">totalSupplyPos</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">p</span> <span class="p">{</span> <span class="n">p</span> <span class="o">:=</span> <span class="mi">1</span> <span class="p">}</span>
            <span class="k">function</span> <span class="n">accountToStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">offset</span> <span class="p">{</span>
                <span class="n">offset</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="mh">0x1000</span><span class="p">,</span> <span class="n">account</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">allowanceStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">spender</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">offset</span> <span class="p">{</span>
                <span class="n">offset</span> <span class="o">:=</span> <span class="n">accountToStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
                <span class="nf">mstore</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
                <span class="nf">mstore</span><span class="p">(</span><span class="mh">0x20</span><span class="p">,</span> <span class="n">spender</span><span class="p">)</span>
                <span class="n">offset</span> <span class="o">:=</span> <span class="nf">keccak256</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mh">0x40</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="cm">/* -------- storage access ---------- */</span>
            <span class="k">function</span> <span class="n">owner</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">o</span> <span class="p">{</span>
                <span class="n">o</span> <span class="o">:=</span> <span class="nf">sload</span><span class="p">(</span><span class="n">ownerPos</span><span class="p">())</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">totalSupply</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">supply</span> <span class="p">{</span>
                <span class="n">supply</span> <span class="o">:=</span> <span class="nf">sload</span><span class="p">(</span><span class="n">totalSupplyPos</span><span class="p">())</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">mintTokens</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="nf">sstore</span><span class="p">(</span><span class="n">totalSupplyPos</span><span class="p">(),</span> <span class="n">safeAdd</span><span class="p">(</span><span class="n">totalSupply</span><span class="p">(),</span> <span class="n">amount</span><span class="p">))</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">balanceOf</span><span class="p">(</span><span class="n">account</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">bal</span> <span class="p">{</span>
                <span class="n">bal</span> <span class="o">:=</span> <span class="nf">sload</span><span class="p">(</span><span class="n">accountToStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">))</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">addToBalance</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="ow">let</span> <span class="nv">offset</span> <span class="o">:=</span> <span class="n">accountToStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
                <span class="nf">sstore</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">safeAdd</span><span class="p">(</span><span class="nf">sload</span><span class="p">(</span><span class="n">offset</span><span class="p">),</span> <span class="n">amount</span><span class="p">))</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">deductFromBalance</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="ow">let</span> <span class="nv">offset</span> <span class="o">:=</span> <span class="n">accountToStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
                <span class="ow">let</span> <span class="nv">bal</span> <span class="o">:=</span> <span class="nf">sload</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">require</span><span class="p">(</span><span class="n">lte</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">bal</span><span class="p">))</span>
                <span class="nf">sstore</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="nf">sub</span><span class="p">(</span><span class="n">bal</span><span class="p">,</span> <span class="n">amount</span><span class="p">))</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">allowance</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">spender</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">amount</span> <span class="p">{</span>
                <span class="n">amount</span> <span class="o">:=</span> <span class="nf">sload</span><span class="p">(</span><span class="n">allowanceStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">spender</span><span class="p">))</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">setAllowance</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">spender</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="nf">sstore</span><span class="p">(</span><span class="n">allowanceStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">spender</span><span class="p">),</span> <span class="n">amount</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">decreaseAllowanceBy</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">spender</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
                <span class="ow">let</span> <span class="nv">offset</span> <span class="o">:=</span> <span class="n">allowanceStorageOffset</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">spender</span><span class="p">)</span>
                <span class="ow">let</span> <span class="nv">currentAllowance</span> <span class="o">:=</span> <span class="nf">sload</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
                <span class="n">require</span><span class="p">(</span><span class="n">lte</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">currentAllowance</span><span class="p">))</span>
                <span class="nf">sstore</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="nf">sub</span><span class="p">(</span><span class="n">currentAllowance</span><span class="p">,</span> <span class="n">amount</span><span class="p">))</span>
            <span class="p">}</span>

            <span class="cm">/* ---------- utility functions ---------- */</span>
            <span class="k">function</span> <span class="n">lte</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">r</span> <span class="p">{</span>
                <span class="n">r</span> <span class="o">:=</span> <span class="nf">iszero</span><span class="p">(</span><span class="nf">gt</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">gte</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">r</span> <span class="p">{</span>
                <span class="n">r</span> <span class="o">:=</span> <span class="nf">iszero</span><span class="p">(</span><span class="nf">lt</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">safeAdd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">r</span> <span class="p">{</span>
                <span class="n">r</span> <span class="o">:=</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
                <span class="k">if</span> <span class="nf">or</span><span class="p">(</span><span class="nf">lt</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span> <span class="nf">lt</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span> <span class="p">{</span> <span class="nf">revert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">calledByOwner</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">cbo</span> <span class="p">{</span>
                <span class="n">cbo</span> <span class="o">:=</span> <span class="nf">eq</span><span class="p">(</span><span class="n">owner</span><span class="p">(),</span> <span class="nf">caller</span><span class="p">())</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">revertIfZeroAddress</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">require</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">function</span> <span class="n">require</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="nf">iszero</span><span class="p">(</span><span class="n">condition</span><span class="p">)</span> <span class="p">{</span> <span class="nf">revert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="path-resolution.html" class="btn btn-neutral float-left" title="Import Path Resolution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> پیشین</a>
        <a href="style-guide.html" class="btn btn-neutral float-right" title="Style Guide" accesskey="n" rel="next">بعدی <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; حق نشر2016-2021, Ethereum.</p>
  </div>

  ساخته شده با <a href="https://www.sphinx-doc.org/">Sphinx</a>
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">پوسته</a>
    تهیّه شده با <a href="https://readthedocs.org">Read the Docs</a>.
  
    <p>
        <a href="credits-and-attribution.html">Credits and attribution</a>.
    </p>


</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book fa-element"> RTD </span>

    <span class="fa fa-element">
    <input class="container_toggle" type="checkbox" id="switch" name="mode">
    <label for="switch"></label>
    </span>

    <span class="fa fa-v fa-element"> v:  <span class="fa fa-caret-down"></span></span>

    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>نگارش‌ها</dt> 
        </dl>
        <dl>
            <dt>بارگیری‌ها</dt> 
        </dl>
        <dl>
            
            <dt>درباره‌ی خواندن مستندات</dt>
            <dd>
                <a href="///projects//?fromdocs=">صفحه خانگی پروژه</a>
            </dd>
            <dd>
                <a href="///builds//?fromdocs=">ساخت‌ها</a>
            </dd>
        </dl>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>