.. index: variable cleanup

*********************
پاکسازی متغیرها
*********************

وقتی value کوتاهتر از 256 بیت است، در برخی موارد بیت‌های باقی مانده باید پاک شوند. کامپایلر سالیدیتی 
برای پاکسازی این بیت‌های باقی‌مانده قبل از هر عملیاتی طراحی شده است که ممکن است توسط پتانسیل 
garbage در بیت‌های باقی‌مانده تأثیر منفی بگذارد. به عنوان مثال، قبل از نوشتن یک value در مِمُوری، 
بیت‌های باقیمانده باید پاک شوند، زیرا محتویات مِمُوری را می‌توان برای محاسبه هش استفاده کرد یا به عنوان 
داده یک کال مسیج (message call) ارسال کرد. به طور مشابه، قبل از ذخیره یک value در storage، 
بیت‌های باقی مانده باید پاک شوند زیرا در غیر این صورت می‌توان  garbled value را مشاهده کرد.

توجه داشته باشید که دسترسی از طریق اسمبلی درون خطی چنین عملیاتی در نظر گرفته نمی‌شود: اگر از 
اسمبلی درون خطی برای دسترسی به متغیرهای سالیدیتی کوتاهتر از ۲۵۶ بیت استفاده می‌کنید، کامپایلر 
تضمین نمی‌کند که مقدار به درستی پاک شده است.

علاوه بر این، اگر بلافاصله عملیات بعدی تحت تأثیر قرار نگیرد، بیت‌ها را پاک نمی‌کنیم. به عنوان مثال، از 
آنجایی که هر مقدار غیر صفر توسط دستور ``JUMPI`` به صورت ``true``  در نظر گرفته می‌شود، ما مقادیر بولی را 
قبل از استفاده به عنوان شرط ``JUMPI`` پاک نمی‌کنیم.

علاوه بر اصل طراحی بالا، کامپایلر سالیدیتی داده‌های ورودی را هنگامی که روی پشته (stack) بارگذاری می‌شوند، پاک می‌کند.

تایپ‌های مختلف قوانین متفاوتی برای پاکسازی مقادیر نامعتبر دارند:


+---------------+---------------+-------------------+
|Type           |Valid Values   |Invalid Values Mean|
+===============+===============+===================+
|enum of n      |0 until n - 1  |exception          |
|members        |               |                   |
+---------------+---------------+-------------------+
|bool           |0 or 1         |1                  |
+---------------+---------------+-------------------+
|signed integers|sign-extended  |currently silently |
|               |word           |wraps; in the      |
|               |               |future exceptions  |
|               |               |will be thrown     |
|               |               |                   |
|               |               |                   |
+---------------+---------------+-------------------+
|unsigned       |higher bits    |currently silently |
|integers       |zeroed         |wraps; in the      |
|               |               |future exceptions  |
|               |               |will be thrown     |
+---------------+---------------+-------------------+
